<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examen Neurol√≥gico - Algoritmo de Evaluaci√≥n</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Variables CSS para una paleta de colores consistente y modo oscuro */
        :root {
            --primary-color: #8e44ad; /* Un morado para neurolog√≠a */
            --primary-gradient: linear-gradient(135deg, #8e44ad 0%, #7d3c98 100%);
            --secondary-color: #27ae60; /* Verde para √©xito/normalidad */
            --secondary-gradient: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            --alert-color: #e74c3c; /* Rojo para alertas */
            --warning-color: #f39c12; /* Naranja para advertencias */
            --info-color: #3498db; /* Un azul para elementos de informaci√≥n (ej., Cranial Nerves) */
            --light-bg: #f8f9fa; /* Fondo claro general */
            --card-bg: #ffffff; /* Fondo de tarjetas/contenedores en modo claro */
            --dark-bg: #1a1a1a; /* Fondo oscuro general */
            --dark-card: #3d3d3d; /* Fondo de tarjetas/contenedores en modo oscuro */
            --text-color: #2c3e50; /* Color de texto predeterminado */
            --light-text-color: #ffffff; /* Color de texto para fondos oscuros */
            --border-color: #e1e8ed; /* Color de borde predeterminado */
            --primary-color-rgb: 142, 68, 173; /* Componentes RGB del color primario para sombras */
        }

        /* Estilos para el modo oscuro */
        [data-theme="dark"] {
            --light-bg: var(--dark-bg);
            --card-bg: var(--dark-card);
            --text-color: var(--light-text-color);
            --border-color: #555;
            --primary-gradient: linear-gradient(135deg, #7d3c98 0%, #8e44ad 100%); /* Ajustar para contraste en oscuro */
            --secondary-gradient: linear-gradient(135deg, #20c997 0%, #28a745 100%);
            --alert-gradient: linear-gradient(135deg, #c0392b 0%, #e74c3c 100%);
            --warning-gradient: linear-gradient(135deg, #e67e22 0%, #f39c12 100%);

            /* Asegurar que los fondos claros espec√≠ficos tambi√©n se ajusten */
            .headache-assessment, .seizure-assessment, .consciousness-assessment, .severity-section, .cranial-nerves, .motor-assessment, .score-calculation, .reflexes-assessment, .cognitive-assessment, .gait-assessment {
                background-color: var(--dark-card);
                border-color: var(--border-color);
            }
             .headache-assessment h4 { color: #ec4899; } /* Mantener colores espec√≠ficos */
             .seizure-assessment h4 { color: #f59e0b; }
             .consciousness-assessment h4 { color: #ef4444; }
             .severity-section h4 { color: #e74c3c; }
             .cranial-nerves h4 { color: #3b82f6; }
             .motor-assessment h4 { color: #22c55e; }
             .score-calculation h4 { color: #4caf50; }
             .reflexes-assessment h4 { color: #f97316; }
             .cognitive-assessment h4 { color: #64748b; }
             .gait-assessment h4 { color: #a855f7; }
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1600px;
            margin: 0 auto;
            padding-top: 160px; /* Espacio para el dashboard fijo */
            background-color: var(--light-bg);
            line-height: 1.6;
            color: var(--text-color); /* Usar variable de color de texto */
            transition: all 0.3s ease;
        }
        
        /* üåô TOGGLE DE TEMA */
        .theme-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--primary-gradient);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
        }
        .theme-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        /* üè† BOT√ìN HOME */
        .home-button {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--secondary-gradient); /* Usar secondary para Home */
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1001;
            transition: all 0.3s ease;
        }
        .home-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(0,0,0,0.2);
        }

        /* üé™ DASHBOARD SUPERIOR FIJO */
        .dashboard-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--primary-gradient);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .dashboard-content {
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); /* Ajustado para m√°s items */
            gap: 12px;
            margin-bottom: 10px;
        }

        .dashboard-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 8px 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            color: white;
            text-align: center;
            font-size: 12px;
        }

        .dashboard-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .dashboard-item i {
            font-size: 16px;
            margin-bottom: 4px;
            display: block;
        }

        .dashboard-alert {
            color: var(--alert-color) !important;
            animation: pulse 2s infinite;
        }

        .dashboard-warning {
            color: var(--warning-color) !important;
        }

        .dashboard-normal {
            color: var(--secondary-color) !important; /* Usar secondary-color para normal */
        }

        /* üéõÔ∏è CONTROLES SUPERIORES */
        .control-bar {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(142, 68, 173, 0.4); /* Sombra basada en primary-color */
        }

        .btn-primary { background: var(--primary-gradient); }
        .btn-success { background: var(--secondary-gradient); }
        .btn-warning { background: var(--warning-gradient); }
        .btn-danger { background: var(--alert-gradient); }


        /* üéØ PANEL LATERAL DE NAVEGACI√ìN */
        .nav-panel {
            position: fixed;
            left: 20px;
            top: 160px;
            width: 250px;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 20px;
            max-height: calc(100vh - 180px);
            overflow-y: auto;
            z-index: 998;
            transform: translateX(-280px); /* Inicialmente fuera de vista */
            transition: transform 0.3s ease;
        }

        .nav-panel.open {
            transform: translateX(0);
        }

        .nav-panel h3 {
            margin: 0 0 15px 0;
            color: var(--primary-color);
            font-size: 16px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 13px;
        }

        .nav-item:hover {
            background: rgba(142, 68, 173, 0.1); /* Ligero hover con color primario */
        }

        .nav-item.completed {
            background: rgba(40, 167, 69, 0.1); /* Fondo verde claro para completado */
            color: var(--secondary-color);
        }

        .nav-item.completed i {
            color: var(--secondary-color);
        }

        .nav-item i {
            width: 16px;
            text-align: center;
        }

        /* üìä PANEL LATERAL STICKY - FUNCIONALIDAD PRINCIPAL */
        .sticky-panel {
            position: fixed;
            top: 160px;
            right: -420px; /* Fuera de pantalla por defecto */
            width: 400px;
            height: calc(100vh - 180px);
            background: var(--card-bg);
            border-radius: 12px 0 0 12px;
            box-shadow: -4px 0 20px rgba(0,0,0,0.15);
            z-index: 997;
            transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow: hidden;
            border: 2px solid var(--primary-color);
        }

        .sticky-panel.active {
            right: 0;
        }

        .sticky-header {
            background: var(--primary-gradient);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 14px;
        }

        .sticky-controls {
            display: flex;
            gap: 8px;
        }

        .sticky-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            border-radius: 4px;
            padding: 6px 10px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .sticky-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.05);
        }

        .sticky-content {
            padding: 20px;
            height: calc(100% - 70px);
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.4;
            white-space: pre-wrap;
            background: var(--light-bg);
            color: var(--text-color);
        }

        .update-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: var(--primary-gradient);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            display: none;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            z-index: 10;
        }

        .update-indicator.active {
            display: flex;
        }

        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Notificaci√≥n de copia */
        .copy-notification {
            position: fixed;
            top: 200px;
            right: 20px;
            background: var(--secondary-color); /* Color de √©xito */
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 500;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.3s ease;
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .copy-notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        /* Ajustar contenido principal cuando paneles est√°n activos */
        .split-view-nav-active .main-container {
            margin-left: 290px;
            transition: margin-left 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .split-view-sticky-active .main-container {
            margin-right: 420px;
            transition: margin-right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        /* Cuando ambos est√°n activos */
        .split-view-nav-active.split-view-sticky-active .main-container {
             margin-left: 290px;
             margin-right: 420px;
        }

        .main-container {
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 30px;
            margin: 0 20px; /* Margen por defecto */
            transition: all 0.3s ease;
        }
        
        h1 {
            color: var(--primary-color); /* Usar variable de color */
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
            border-bottom: 3px solid var(--primary-color); /* Usar variable de color */
            padding-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        /* ‚úÖ SECCIONES MEJORADAS */
        .section {
            margin-bottom: 25px;
            border: 2px solid var(--border-color); /* Usar variable de color de borde */
            border-radius: 12px; /* M√°s redondeado */
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--card-bg); /* Fondo de la tarjeta */
        }
        
        .section.active {
            border-color: var(--primary-color);
            box-shadow: 0 4px 15px rgba(var(--primary-color-rgb), 0.15); /* Sombra m√°s din√°mica */
        }
        
        .section-header {
            background: var(--primary-gradient); /* Degradado primario */
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease; /* Transici√≥n para hover */
        }
        
        .section-header:hover {
            box-shadow: inset 0 0 20px rgba(255,255,255,0.1); /* Efecto de luz interior en hover */
        }
        
        .section-header .arrow {
            transition: transform 0.3s ease;
            font-size: 18px;
        }
        
        .section-header.expanded .arrow {
            transform: rotate(180deg);
        }

        .section-header .completion-badge {
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            margin-left: 10px;
        }

        .section-header .completion-badge.completed {
            background: var(--secondary-color); /* Fondo verde para completado */
        }
        
        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
            background: var(--light-bg); /* Fondo de contenido de secci√≥n */
            color: var(--text-color);
        }
        
        .section-content.expanded {
            padding: 20px;
        }

        /* Animaci√≥n de entrada de contenido */
        .section-content.expanded .slide-in {
            animation: slideIn 0.3s ease forwards;
        }
        @keyframes slideIn {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* üìã CONTENEDORES DE EXAMEN MEJORADOS */
        .exam-container {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease; /* Transici√≥n para hover */
        }

        .exam-container:hover {
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .exam-header {
            font-size: 18px;
            font-weight: 600;
            background: var(--primary-gradient); /* Degradado primario */
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: -20px -20px 15px -20px; /* Margen para superponerse */
            padding: 12px 20px;
            border-radius: 8px 8px 0 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .exam-section {
            background: var(--light-bg); /* Fondo ligero para sub-secciones */
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .exam-section h4 {
            color: var(--text-color);
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sub-header {
            color: var(--primary-color);
            margin: 15px 0 8px 0;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* ‚úÖ GRID DE CHECKBOXES MEJORADO */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 8px; /* M√°s padding */
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover {
            background: rgba(142, 68, 173, 0.05); /* Ligero hover con color primario */
        }
        
        .checkbox-item input[type="checkbox"],
        .checkbox-item input[type="radio"] {
            width: 16px;
            height: 16px;
            margin: 0;
            accent-color: var(--secondary-color); /* Color de acento para checkboxes */
        }
        
        .checkbox-item label {
            font-size: 13px;
            color: var(--text-color);
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .checkbox-item input:checked + label {
            color: var(--secondary-color); /* Color de texto cuando marcado */
            font-weight: 500;
        }
        
        /* üé® ELEMENTOS VISUALES DISTINTIVOS */
        .measurement {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }
        
        .measurement label {
            font-size: 12px;
            color: #5d6d7e;
            flex-basis: 120px;
            flex-shrink: 0;
        }
        
        .input-field {
            width: 80px;
            padding: 6px 10px; /* M√°s padding */
            border: 2px solid var(--border-color); /* Borde m√°s pronunciado */
            border-radius: 6px; /* M√°s redondeado */
            font-size: 12px;
            text-align: center;
            transition: all 0.3s ease;
            background-color: var(--card-bg); /* Asegura que se vea bien en modo oscuro */
            color: var(--text-color);
        }
        
        .input-field:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color-rgb), 0.1); /* Sombra al enfocar */
        }

        .bilateral-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 10px;
        }
        
        .side-container {
            padding: 15px;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 8px; /* M√°s redondeado */
            box-shadow: 0 2px 8px rgba(0,0,0,0.03); /* Sombra sutil */
            transition: all 0.3s ease;
        }
        .side-container:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }
        
        .side-header {
            font-weight: 600;
            font-size: 14px;
            color: var(--primary-color); /* Usar color primario */
            margin-bottom: 12px;
            text-align: center;
            border-bottom: 2px solid var(--primary-color); /* Borde m√°s grueso y con color */
            padding-bottom: 8px;
        }

        .headache-assessment {
            background: #fdf2f8;
            border: 1px solid #ec4899; /* Color espec√≠fico para cefalea */
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }
        /* Para resaltado condicional de secciones */
        .warning-highlight {
            box-shadow: 0 0 8px rgba(243, 156, 18, 0.4) !important;
            border-color: var(--warning-color) !important;
        }


        .headache-assessment h4 {
            color: #be185d;
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .seizure-assessment {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .seizure-assessment h4 {
            color: #d97706;
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .consciousness-assessment {
            background: #fef2f2;
            border: 1px solid #ef4444;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .consciousness-assessment h4 {
            color: #dc2626;
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .severity-section {
            background: #fdf2f2;
            border: 1px solid var(--alert-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .severity-section h4 {
            color: var(--alert-color);
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .severity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 8px;
        }

        .severity-item {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 3px;
        }

        .severity-item input[type="radio"] {
            width: 14px;
            height: 14px;
            accent-color: var(--alert-color); /* Color de acento para radios de severidad */
        }

        .severity-item label {
            font-size: 12px;
            color: var(--text-color); /* Color de texto general */
            cursor: pointer;
        }
        
        .test-results {
            margin-top: 10px;
        }
        
        .test-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            padding: 8px 12px; /* M√°s padding */
            margin: 4px 0;
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px; /* M√°s redondeado */
            transition: all 0.3s ease;
        }
        .test-item:hover {
            border-color: var(--primary-color);
            box-shadow: 0 2px 8px rgba(var(--primary-color-rgb), 0.1);
        }
        
        .test-item label {
            font-size: 12px;
            color: var(--text-color);
            flex-grow: 1;
            margin-right: 10px;
        }
        
        .test-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .test-checkbox {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .test-checkbox input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--primary-color); /* Color de acento */
        }
        
        .test-checkbox span {
            font-size: 12px; /* Un poco m√°s grande */
            font-weight: 600; /* Negrita */
        }
        
        .positive { color: var(--alert-color) !important; }
        .negative { color: var(--secondary-color) !important; } /* Usar verde para negativo/normal */
        
        .cranial-nerves {
            background: #e8f4fd;
            border: 1px solid var(--info-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .cranial-nerves h4 {
            color: var(--info-color);
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .motor-assessment {
            background: #f0fdf4;
            border: 1px solid var(--secondary-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .motor-assessment h4 {
            color: var(--secondary-color);
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .score-calculation {
            background: #e8f5e8;
            border: 1px solid var(--secondary-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 5px 0;
            font-size: 13px;
        }

        .score-value {
            font-weight: 600;
            color: var(--secondary-color);
        }

        .reflexes-assessment {
            background: #fff7ed;
            border: 1px solid var(--warning-color);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .reflexes-assessment h4 {
            color: var(--warning-color);
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .cognitive-assessment {
            background: #f8fafc;
            border: 1px solid var(--border-color); /* Un color m√°s neutro para cognitivo */
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .cognitive-assessment h4 {
            color: var(--text-color);
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }

        .conclusion {
            margin-top: 30px;
            padding: 25px; /* M√°s padding */
            background: var(--card-bg);
            border-radius: 12px; /* M√°s redondeado */
            border: 2px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }
        .conclusion::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient); /* Barra superior con degradado */
        }
        
        .conclusion h3 {
            color: var(--text-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .conclusion-text {
            padding: 20px; /* M√°s padding */
            background: var(--light-bg);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            min-height: 200px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            font-size: 13px;
            line-height: 1.5; /* Mayor interlineado */
            color: var(--text-color);
        }

        .control-buttons {
            margin-top: 25px; /* M√°s margen superior */
            display: flex;
            gap: 12px; /* Mayor espacio entre botones */
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px; /* M√°s padding */
            border: none;
            border-radius: 8px; /* M√°s redondeado */
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease; /* Transici√≥n para hover */
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-secondary {
            background-color: #95a5a6;
            color: white;
        }
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }

        .legend {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            font-size: 12px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        .headache-color { background-color: #be185d; }
        .seizure-color { background-color: #d97706; }
        .consciousness-color { background-color: #dc2626; }
        .neuro-color { background-color: var(--primary-color); } /* Usar primary para neuro general */

        .description-area {
            width: 100%;
            min-height: 60px;
            padding: 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 12px;
            resize: vertical;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .strength-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .strength-group {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            background: var(--light-bg); /* Fondo m√°s ligero */
        }

        .strength-group h5 {
            margin: 0 0 8px 0;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
            color: var(--primary-color); /* Color primario */
        }

        .strength-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 3px 0;
            font-size: 11px;
        }

        .strength-select {
            width: 50px;
            padding: 2px 4px;
            border: 1px solid var(--border-color);
            border-radius: 3px;
            font-size: 10px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        .reflex-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .reflex-side {
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            background: var(--light-bg);
        }

        .reflex-side h6 {
            margin: 0 0 8px 0;
            font-size: 12px;
            text-align: center;
            color: var(--primary-color);
            font-weight: 600;
        }

        .reflex-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 3px 0;
            font-size: 11px;
        }

        .reflex-scale {
            display: flex;
            gap: 3px;
        }

        .reflex-scale input[type="radio"] {
            width: 12px;
            height: 12px;
            accent-color: var(--warning-color); /* Color de acento para reflejos */
        }
        .reflex-scale label {
            font-size: 9px;
            color: var(--text-color);
            cursor: pointer;
        }

        .gait-assessment {
            background: #fef7ff;
            border: 1px solid #a855f7;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .gait-assessment h4 {
            color: #7c3aed;
            margin: 0 0 10px 0;
            font-size: 14px;
            font-weight: 600;
        }
        
        /* üì± RESPONSIVIDAD MEJORADA */
        @media (max-width: 1200px) {
            .sticky-panel {
                width: 350px;
            }
            .split-view-sticky-active .main-container {
                margin-right: 370px;
            }
        }

        @media (max-width: 768px) {
            body { padding-top: 120px; } /* Ajuste para el dashboard en pantallas peque√±as */
            
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .control-bar {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin: 10px 0;
            }
            
            .nav-panel {
                transform: translateX(-100%); /* Ocultar completamente */
                width: calc(100vw - 40px); /* Ocupar casi todo el ancho */
                left: 20px; /* Asegurar que no haya margen extra */
            }
            .nav-panel.open {
                transform: translateX(0);
            }
            .split-view-nav-active .main-container {
                margin-left: 20px; /* Quitar margen extra si el panel est√° encima */
            }
            
            .main-container {
                margin: 0 10px;
            }
            
            .sticky-panel {
                width: calc(100vw - 20px);
                right: -100vw; /* Fuera de pantalla */
                left: 10px; /* Posicionar desde la izquierda */
                border-radius: 12px; /* Redondear bordes si est√° solo */
            }
            .sticky-panel.active {
                right: auto;
                left: 10px;
            }
            .split-view-sticky-active .main-container {
                margin-right: 10px; /* Quitar margen extra */
            }
            
            .checkbox-grid {
                grid-template-columns: 1fr;
            }
            
            .bilateral-container {
                grid-template-columns: 1fr; /* Una columna en pantallas peque√±as */
            }
            .strength-grid, .reflex-grid {
                grid-template-columns: 1fr; /* Una columna en pantallas peque√±as */
            }
        }

        /* Animaciones generales */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" title="Cambiar tema">
        <i class="fas fa-moon" id="theme-icon"></i>
    </button>

    <a href="index.html" class="home-button" title="Inicio">
        <i class="fas fa-home"></i>
    </a>

    <div class="dashboard-fixed">
        <div class="dashboard-content">
            <div class="dashboard-grid">
                <div class="dashboard-item">
                    <i class="fas fa-user-md"></i>
                    <div>Examen</div>
                    <div id="exam-progress">0%</div>
                </div>
                <div class="dashboard-item">
                    <i class="fas fa-clipboard-list"></i>
                    <div>Secciones</div>
                    <div id="sections-completed">0/6</div>
                </div>
                <div class="dashboard-item dashboard-alert" id="alerts-item">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>Alertas</div>
                    <div id="alert-count">0</div>
                </div>
                <div class="dashboard-item dashboard-warning" id="warnings-item">
                    <i class="fas fa-exclamation-circle"></i>
                    <div>Avisos</div>
                    <div id="warning-count">0</div>
                </div>
                <div class="dashboard-item dashboard-normal" id="findings-item">
                    <i class="fas fa-search"></i>
                    <div>Hallazgos</div>
                    <div id="findings-count">0</div>
                </div>
                 <div class="dashboard-item">
                    <i class="fas fa-brain"></i>
                    <div>GCS</div>
                    <div id="gcs-status">--</div>
                </div>
                 <div class="dashboard-item">
                    <i class="fas fa-frown"></i>
                    <div>NIHSS</div>
                    <div id="nihss-status">--</div>
                </div>
                 <div class="dashboard-item">
                    <i class="fas fa-scroll"></i>
                    <div>MMSE</div>
                    <div id="mmse-status">--</div>
                </div>
            </div>
            <div class="control-bar">
                <button class="control-btn btn-primary" onclick="toggleNavPanel()">
                    <i class="fas fa-bars"></i> Navegaci√≥n
                </button>
                <button class="control-btn btn-primary" onclick="toggleStickyPanel()" id="sticky-toggle-btn">
                    <i class="fas fa-columns"></i> Vista Dividida
                </button>
                <button class="control-btn btn-success" onclick="generateConclusion()">
                    <i class="fas fa-file-medical"></i> Generar
                </button>
                <button class="control-btn btn-warning" onclick="expandAllSections()">
                    <i class="fas fa-expand-alt"></i> Expandir
                </button>
                <button class="control-btn btn-danger" onclick="clearForm()">
                    <i class="fas fa-trash"></i> Limpiar
                </button>
            </div>
        </div>
    </div>

    <div class="nav-panel" id="nav-panel">
        <h3><i class="fas fa-map"></i> Navegaci√≥n R√°pida</h3>
        <div class="nav-item" onclick="scrollToSection('anamnesis-section')">
            <i class="fas fa-user-edit"></i>
            <span>Anamnesis</span>
            <i class="fas fa-check" style="margin-left: auto; opacity: 0;" id="nav-anamnesis"></i>
        </div>
        <div class="nav-item" onclick="scrollToSection('general-neuro-exam-section')">
            <i class="fas fa-brain"></i>
            <span>Examen General</span>
            <i class="fas fa-check" style="margin-left: auto; opacity: 0;" id="nav-general-neuro-exam"></i>
        </div>
        <div class="nav-item" onclick="scrollToSection('motor-reflexes-section')">
            <i class="fas fa-running"></i>
            <span>Motor y Reflejos</span>
            <i class="fas fa-check" style="margin-left: auto; opacity: 0;" id="nav-motor-reflexes"></i>
        </div>
        <div class="nav-item" onclick="scrollToSection('sensory-coordination-section')">
            <i class="fas fa-hand-paper"></i>
            <span>Sensitivo y Coordinaci√≥n</span>
            <i class="fas fa-check" style="margin-left: auto; opacity: 0;" id="nav-sensory-coordination"></i>
        </div>
        <div class="nav-item" onclick="scrollToSection('neurological-scales-section')">
            <i class="fas fa-balance-scale"></i>
            <span>Escalas</span>
            <i class="fas fa-check" style="margin-left: auto; opacity: 0;" id="nav-neurological-scales"></i>
        </div>
        <div class="nav-item" onclick="scrollToSection('special-neuro-tests-section')">
            <i class="fas fa-vial"></i>
            <span>Pruebas Especiales</span>
            <i class="fas fa-check" style="margin-left: auto; opacity: 0;" id="nav-special-neuro-tests"></i>
        </div>
    </div>

    <div class="sticky-panel" id="stickyConclusion">
        <div class="sticky-header">
            <span><i class="fas fa-file-medical-alt"></i> Informe en Tiempo Real</span>
            <div class="sticky-controls">
                <button class="sticky-btn" onclick="copyStickyToClipboard()" title="Copiar informe">
                    <i class="fas fa-copy"></i>
                </button>
                <button class="sticky-btn" onclick="printStickyConclusion()" title="Imprimir informe">
                    <i class="fas fa-print"></i>
                </button>
                <button class="sticky-btn" onclick="generateStickyConclusion()" title="Actualizar informe">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
        </div>
        <div class="sticky-content" id="stickyContent">
            Seleccione los par√°metros del examen para generar el informe en tiempo real...
        </div>
        <div class="update-indicator" id="updateIndicator">
            <div class="spinner"></div>
            <span>Actualizando informe...</span>
        </div>
    </div>

    <div class="copy-notification" id="copyNotification">
        <i class="fas fa-check-circle"></i>
        <span>¬°Informe copiado al portapapeles!</span>
    </div>

    <div class="main-container">
        <h1><i class="fas fa-brain"></i> Examen Neurol√≥gico - Algoritmo de Evaluaci√≥n</h1>
        
        <div class="section" id="anamnesis-section">
            <div class="section-header" onclick="toggleSection(this)">
                <span><i class="fas fa-user-edit"></i> Anamnesis y Quejas Principales</span>
                <div style="display: flex; align-items: center;">
                    <div class="completion-badge" id="badge-anamnesis">
                        <i class="fas fa-circle"></i>
                    </div>
                    <span class="arrow">‚ñº</span>
                </div>
            </div>
            <div class="section-content" id="anamnesis">
                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-clipboard-list"></i> Quejas Neurol√≥gicas Principales</div>
                    <div class="checkbox-grid">
                        <div class="checkbox-item"><input type="checkbox" id="cefalea" onchange="handleHeadacheComplaint(this)"><label for="cefalea">Cefalea</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="mareos-vertigo" onchange="updateDashboard()"><label for="mareos-vertigo">Mareos/V√©rtigo</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="convulsiones" onchange="handleSeizureComplaint(this)"><label for="convulsiones">Convulsiones</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="perdida-conciencia" onchange="handleConsciousnessComplaint(this)"><label for="perdida-conciencia">P√©rdida de conciencia</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="debilidad-muscular" onchange="updateDashboard()"><label for="debilidad-muscular">Debilidad muscular</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="alteraciones-sensitivas" onchange="updateDashboard()"><label for="alteraciones-sensitivas">Alteraciones sensitivas</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="trastornos-lenguaje" onchange="updateDashboard()"><label for="trastornos-lenguaje">Trastornos del lenguaje</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="alteraciones-memoria" onchange="updateDashboard()"><label for="alteraciones-memoria">Alteraciones de memoria</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="trastornos-marcha" onchange="updateDashboard()"><label for="trastornos-marcha">Trastornos de la marcha</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="temblor" onchange="updateDashboard()"><label for="temblor">Temblor</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="movimientos-anormales" onchange="updateDashboard()"><label for="movimientos-anormales">Movimientos anormales</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="alteraciones-vision" onchange="updateDashboard()"><label for="alteraciones-vision">Alteraciones visuales</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="alteraciones-audicion" onchange="updateDashboard()"><label for="alteraciones-audicion">Alteraciones auditivas</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="disfagia" onchange="updateDashboard()"><label for="disfagia">Disfagia</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="incontinencia-neurologica" onchange="updateDashboard()"><label for="incontinencia-neurologica">Incontinencia neurol√≥gica</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="alteraciones-sueno" onchange="updateDashboard()"><label for="alteraciones-sueno">Alteraciones del sue√±o</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="nauseas-vomitos-neuro" onchange="updateDashboard()"><label for="nauseas-vomitos-neuro">N√°useas/V√≥mitos</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="alteraciones-comportamiento" onchange="updateDashboard()"><label for="alteraciones-comportamiento">Alteraciones del comportamiento</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="dolor-neuropatico" onchange="updateDashboard()"><label for="dolor-neuropatico">Dolor neurop√°tico</label></div>
                        <div class="checkbox-item"><input type="checkbox" id="sin-quejas-neuro" onchange="handleNoComplaints()"><label for="sin-quejas-neuro">Sin quejas</label></div>
                    </div>
                </div>

                <div class="exam-container hidden" id="headache-section">
                    <div class="exam-header"><i class="fas fa-head-side-mask"></i> Caracterizaci√≥n de Cefalea</div>
                    <div class="headache-assessment">
                        <h4>Intensidad y Localizaci√≥n</h4>
                        <div class="measurement">
                            <label>Intensidad (EVA):</label>
                            <input type="range" id="cefalea-intensidad" min="0" max="10" value="0" oninput="updateCefaleaValue(this.value)">
                            <span id="cefalea-value">0</span><span>/10</span>
                        </div>
                        <div class="severity-grid">
                            <div class="severity-item"><input type="radio" name="localizacion-cefalea" id="frontal" onchange="updateDashboard()"><label for="frontal">Frontal</label></div>
                            <div class="severity-item"><input type="radio" name="localizacion-cefalea" id="temporal" onchange="updateDashboard()"><label for="temporal">Temporal</label></div>
                            <div class="severity-item"><input type="radio" name="localizacion-cefalea" id="parietal" onchange="updateDashboard()"><label for="parietal">Parietal</label></div>
                            <div class="severity-item"><input type="radio" name="localizacion-cefalea" id="occipital" onchange="updateDashboard()"><label for="occipital">Occipital</label></div>
                            <div class="severity-item"><input type="radio" name="localizacion-cefalea" id="hemicraneal" onchange="updateDashboard()"><label for="hemicraneal">Hemicraneal</label></div>
                            <div class="severity-item"><input type="radio" name="localizacion-cefalea" id="holocraneal" onchange="updateDashboard()"><label for="holocraneal">Holocraneal</label></div>
                        </div>
                        <div class="severity-grid">
                            <div class="severity-item"><input type="radio" name="tipo-cefalea" id="pulsatil" onchange="updateDashboard()"><label for="pulsatil">Puls√°til</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-cefalea" id="opresivo" onchange="updateDashboard()"><label for="opresivo">Opresivo</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-cefalea" id="punzante" onchange="updateDashboard()"><label for="punzante">Punzante</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-cefalea" id="explosivo" onchange="updateDashboard()"><label for="explosivo">Explosivo</label></div>
                        </div>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="fotofobia-cefalea" onchange="updateDashboard()"><label for="fotofobia-cefalea">Fotofobia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="fonofobia" onchange="updateDashboard()"><label for="fonofobia">Fonofobia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="osmofobia" onchange="updateDashboard()"><label for="osmofobia">Osmofobia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="nauseas-cefalea" onchange="updateDashboard()"><label for="nauseas-cefalea">N√°useas</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="vomitos-cefalea" onchange="updateDashboard()"><label for="vomitos-cefalea">V√≥mitos</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="aura-visual" onchange="updateDashboard()"><label for="aura-visual">Aura visual</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="aura-sensitiva" onchange="updateDashboard()"><label for="aura-sensitiva">Aura sensitiva</label></div>
                        </div>
                        <div class="measurement">
                            <label>Duraci√≥n episodios:</label>
                            <input type="number" class="input-field" id="duracion-cefalea" min="0" max="168" onchange="updateDashboard()">
                            <span>horas</span>
                        </div>
                        <div class="measurement">
                            <label>Frecuencia mensual:</label>
                            <input type="number" class="input-field" id="frecuencia-cefalea" min="0" max="31" onchange="updateDashboard()">
                            <span>d√≠as/mes</span>
                        </div>
                    </div>
                </div>

                <div class="exam-container hidden" id="seizure-section">
                    <div class="exam-header"><i class="fas fa-bolt"></i> Caracterizaci√≥n de Convulsiones</div>
                    <div class="seizure-assessment">
                        <h4>Tipo y Caracter√≠sticas</h4>
                        <div class="severity-grid">
                            <div class="severity-item"><input type="radio" name="tipo-convulsion" id="tonica" onchange="updateDashboard()"><label for="tonica">T√≥nica</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-convulsion" id="clonica" onchange="updateDashboard()"><label for="clonica">Cl√≥nica</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-convulsion" id="tonica-clonica" onchange="updateDashboard()"><label for="tonica-clonica">T√≥nico-cl√≥nica</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-convulsion" id="ausencia" onchange="updateDashboard()"><label for="ausencia">Ausencia</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-convulsion" id="mioclonica" onchange="updateDashboard()"><label for="mioclonica">Miocl√≥nica</label></div>
                            <div class="severity-item"><input type="radio" name="tipo-convulsion" id="focal" onchange="updateDashboard()"><label for="focal">Focal</label></div>
                        </div>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="perdida-conciencia-convulsion" onchange="updateDashboard()"><label for="perdida-conciencia-convulsion">P√©rdida de conciencia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="mordedura-lengua" onchange="updateDashboard()"><label for="mordedura-lengua">Mordedura de lengua</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="incontinencia-convulsion" onchange="updateDashboard()"><label for="incontinencia-convulsion">Incontinencia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="confusion-postictal" onchange="updateDashboard()"><label for="confusion-postictal">Confusi√≥n postictal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="aura-preictal" onchange="updateDashboard()"><label for="aura-preictal">Aura preictal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="automatismos" onchange="updateDashboard()"><label for="automatismos">Automatismos</label></div>
                        </div>
                        <div class="measurement">
                            <label>Duraci√≥n crisis:</label>
                            <input type="number" class="input-field" id="duracion-convulsion" min="0" max="60" onchange="updateDashboard()">
                            <span>minutos</span>
                        </div>
                        <div class="measurement">
                            <label>Frecuencia crisis/mes:</label>
                            <input type="number" class="input-field" id="frecuencia-convulsion" min="0" max="100" onchange="updateDashboard()">
                            <span>crisis</span>
                        </div>
                    </div>
                </div>

                <div class="exam-container hidden" id="consciousness-section">
                    <div class="exam-header"><i class="fas fa-brain"></i> Alteraciones de Conciencia</div>
                    <div class="consciousness-assessment">
                        <h4>Nivel de Conciencia</h4>
                        <div class="severity-grid">
                            <div class="severity-item"><input type="radio" name="nivel-conciencia" id="alerta" onchange="updateDashboard()"><label for="alerta">Alerta</label></div>
                            <div class="severity-item"><input type="radio" name="nivel-conciencia" id="somnolencia" onchange="updateDashboard()"><label for="somnolencia">Somnolencia</label></div>
                            <div class="severity-item"><input type="radio" name="nivel-conciencia" id="estupor" onchange="updateDashboard()"><label for="estupor">Estupor</label></div>
                            <div class="severity-item"><input type="radio" name="nivel-conciencia" id="coma" onchange="updateDashboard()"><label for="coma">Coma</label></div>
                        </div>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="desorientacion-temporal" onchange="updateDashboard()"><label for="desorientacion-temporal">Desorientaci√≥n temporal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="desorientacion-espacial" onchange="updateDashboard()"><label for="desorientacion-espacial">Desorientaci√≥n espacial</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="desorientacion-personal" onchange="updateDashboard()"><label for="desorientacion-personal">Desorientaci√≥n personal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="confusion-mental" onchange="updateDashboard()"><label for="confusion-mental">Confusi√≥n mental</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="agitacion" onchange="updateDashboard()"><label for="agitacion">Agitaci√≥n</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="apatia" onchange="updateDashboard()"><label for="apatia">Apat√≠a</label></div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-notes-medical"></i> Antecedentes Neurol√≥gicos</div>
                    <div class="exam-section">
                        <h4>Historia Personal</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="traumatismo-craneal" onchange="updateDashboard()"><label for="traumatismo-craneal">Traumatismo craneal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="accidente-cerebrovascular" onchange="updateDashboard()"><label for="accidente-cerebrovascular">Accidente cerebrovascular</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="epilepsia" onchange="updateDashboard()"><label for="epilepsia">Epilepsia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="migranas" onchange="updateDashboard()"><label for="migranas">Migra√±as</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="enfermedad-parkinson" onchange="updateDashboard()"><label for="enfermedad-parkinson">Enfermedad de Parkinson</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="esclerosis-multiple" onchange="updateDashboard()"><label for="esclerosis-multiple">Esclerosis m√∫ltiple</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="demencia" onchange="updateDashboard()"><label for="demencia">Demencia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="neuropatia-periferica" onchange="updateDashboard()"><label for="neuropatia-periferica">Neuropat√≠a perif√©rica</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="meningitis" onchange="updateDashboard()"><label for="meningitis">Meningitis</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="tumor-cerebral" onchange="updateDashboard()"><label for="tumor-cerebral">Tumor cerebral</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="cirugia-neurologica" onchange="updateDashboard()"><label for="cirugia-neurologica">Cirug√≠a neurol√≥gica</label></div>
                        </div>
                    </div>
                    <div class="exam-section">
                        <h4>Historia Familiar</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="familia-epilepsia" onchange="updateDashboard()"><label for="familia-epilepsia">Epilepsia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="familia-migranas" onchange="updateDashboard()"><label for="familia-migranas">Migra√±as</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="familia-demencia" onchange="updateDashboard()"><label for="familia-demencia">Demencia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="familia-parkinson" onchange="updateDashboard()"><label for="familia-parkinson">Parkinson</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="familia-esclerosis" onchange="updateDashboard()"><label for="familia-esclerosis">Esclerosis m√∫ltiple</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="familia-huntington" onchange="updateDashboard()"><label for="familia-huntington">Huntington</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="familia-acv" onchange="updateDashboard()"><label for="familia-acv">Accidente cerebrovascular</label></div>
                        </div>
                    </div>
                    <div class="exam-section">
                        <h4>Factores de Riesgo</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="hipertension-neuro" onchange="updateDashboard()"><label for="hipertension-neuro">Hipertensi√≥n arterial</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="diabetes-neuro" onchange="updateDashboard()"><label for="diabetes-neuro">Diabetes mellitus</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="dislipidemia-neuro" onchange="updateDashboard()"><label for="dislipidemia-neuro">Dislipidemia</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="tabaquismo-neuro" onchange="updateDashboard()"><label for="tabaquismo-neuro">Tabaquismo</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="alcoholismo" onchange="updateDashboard()"><label for="alcoholismo">Alcoholismo</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="drogas-ilicitas" onchange="updateDashboard()"><label for="drogas-ilicitas">Drogas il√≠citas</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="cardiopatia" onchange="updateDashboard()"><label for="cardiopatia">Cardiopat√≠a</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="anticoagulantes" onchange="updateDashboard()"><label for="anticoagulantes">Anticoagulantes</label></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section" id="general-neuro-exam-section">
            <div class="section-header" onclick="toggleSection(this)">
                <span><i class="fas fa-user-md"></i> Examen Neurol√≥gico General</span>
                <div style="display: flex; align-items: center;">
                    <div class="completion-badge" id="badge-general-neuro-exam">
                        <i class="fas fa-circle"></i>
                    </div>
                    <span class="arrow">‚ñº</span>
                </div>
            </div>
            <div class="section-content" id="general-neuro-exam">
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color neuro-color"></div>
                        <span>Evaluaci√≥n Neurol√≥gica</span>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-brain"></i> Estado Mental y Funciones Superiores</div>
                    <div class="cognitive-assessment">
                        <h4>Orientaci√≥n y Atenci√≥n</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="orientado-tiempo" onchange="updateDashboard()"><label for="orientado-tiempo">Orientado en tiempo</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="orientado-espacio" onchange="updateDashboard()"><label for="orientado-espacio">Orientado en espacio</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="orientado-persona" onchange="updateDashboard()"><label for="orientado-persona">Orientado en persona</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="atencion-normal" onchange="updateDashboard()"><label for="atencion-normal">Atenci√≥n normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="concentracion-normal" onchange="updateDashboard()"><label for="concentracion-normal">Concentraci√≥n normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="memoria-inmediata" onchange="updateDashboard()"><label for="memoria-inmediata">Memoria inmediata conservada</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="memoria-reciente" onchange="updateDashboard()"><label for="memoria-reciente">Memoria reciente conservada</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="memoria-remota" onchange="updateDashboard()"><label for="memoria-remota">Memoria remota conservada</label></div>
                        </div>
                    </div>

                    <div class="cognitive-assessment">
                        <h4>Lenguaje y Comunicaci√≥n</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="lenguaje-normal" onchange="updateDashboard()"><label for="lenguaje-normal">Lenguaje normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="afasia-expresiva" onchange="updateDashboard()"><label for="afasia-expresiva">Afasia expresiva (Broca)</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="afasia-receptiva" onchange="updateDashboard()"><label for="afasia-receptiva">Afasia receptiva (Wernicke)</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="afasia-mixta" onchange="updateDashboard()"><label for="afasia-mixta">Afasia mixta</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="disartria" onchange="updateDashboard()"><label for="disartria">Disartria</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="disfonia" onchange="updateDashboard()"><label for="disfonia">Disfon√≠a</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="comprension-normal" onchange="updateDashboard()"><label for="comprension-normal">Comprensi√≥n normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="repeticion-normal" onchange="updateDashboard()"><label for="repeticion-normal">Repetici√≥n normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="denominacion-normal" onchange="updateDashboard()"><label for="denominacion-normal">Denominaci√≥n normal</label></div>
                        </div>
                    </div>

                    <div class="cognitive-assessment">
                        <h4>Funciones Ejecutivas</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="juicio-normal" onchange="updateDashboard()"><label for="juicio-normal">Juicio normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="insight-conservado" onchange="updateDashboard()"><label for="insight-conservado">Insight conservado</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="calculo-normal" onchange="updateDashboard()"><label for="calculo-normal">C√°lculo normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="abstraccion-normal" onchange="updateDashboard()"><label for="abstraccion-normal">Abstracci√≥n normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="pensamiento-organizado" onchange="updateDashboard()"><label for="pensamiento-organizado">Pensamiento organizado</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="planificacion-normal" onchange="updateDashboard()"><label for="planificacion-normal">Planificaci√≥n normal</label></div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-user-friends"></i> Pares Craneales</div>
                    <div class="cranial-nerves">
                        <h4>Evaluaci√≥n de Pares Craneales I-XII</h4>
                        <div class="test-results">
                            <div class="test-item">
                                <label>I - Olfatorio</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="olfatorio-normal" onchange="handleMutuallyExclusive('olfatorio-normal', 'olfatorio-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="olfatorio-alterado" onchange="handleMutuallyExclusive('olfatorio-normal', 'olfatorio-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>II - √ìptico (Agudeza visual, campimetr√≠a)</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="optico-normal" onchange="handleMutuallyExclusive('optico-normal', 'optico-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="optico-alterado" onchange="handleMutuallyExclusive('optico-normal', 'optico-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>III - Oculomotor (Pupilas, movimientos oculares)</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="oculomotor-normal" onchange="handleMutuallyExclusive('oculomotor-normal', 'oculomotor-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="oculomotor-alterado" onchange="handleMutuallyExclusive('oculomotor-normal', 'oculomotor-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>IV - Troclear</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="troclear-normal" onchange="handleMutuallyExclusive('troclear-normal', 'troclear-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="troclear-alterado" onchange="handleMutuallyExclusive('troclear-normal', 'troclear-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>V - Trig√©mino (Sensitivo y motor)</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="trigemino-normal" onchange="handleMutuallyExclusive('trigemino-normal', 'trigemino-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="trigemino-alterado" onchange="handleMutuallyExclusive('trigemino-normal', 'trigemino-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>VI - Abducens</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="abducens-normal" onchange="handleMutuallyExclusive('abducens-normal', 'abducens-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="abducens-alterado" onchange="handleMutuallyExclusive('abducens-normal', 'abducens-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>VII - Facial (Motor y sensitivo)</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="facial-normal" onchange="handleMutuallyExclusive('facial-normal', 'facial-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="facial-alterado" onchange="handleMutuallyExclusive('facial-normal', 'facial-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>VIII - Vestibulococlear (Audici√≥n y equilibrio)</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="vestibulococlear-normal" onchange="handleMutuallyExclusive('vestibulococlear-normal', 'vestibulococlear-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="vestibulococlear-alterado" onchange="handleMutuallyExclusive('vestibulococlear-normal', 'vestibulococlear-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>IX - Glosofar√≠ngeo</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="glosofaringeo-normal" onchange="handleMutuallyExclusive('glosofaringeo-normal', 'glosofaringeo-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="glosofaringeo-alterado" onchange="handleMutuallyExclusive('glosofaringeo-normal', 'glosofaringeo-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>X - Vago</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="vago-normal" onchange="handleMutuallyExclusive('vago-normal', 'vago-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="vago-alterado" onchange="handleMutuallyExclusive('vago-normal', 'vago-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>XI - Accesorio espinal</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="accesorio-normal" onchange="handleMutuallyExclusive('accesorio-normal', 'accesorio-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="accesorio-alterado" onchange="handleMutuallyExclusive('accesorio-normal', 'accesorio-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>XII - Hipogloso</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="hipogloso-normal" onchange="handleMutuallyExclusive('hipogloso-normal', 'hipogloso-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="hipogloso-alterado" onchange="handleMutuallyExclusive('hipogloso-normal', 'hipogloso-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-walking"></i> Evaluaci√≥n de la Marcha</div>
                    <div class="gait-assessment">
                        <h4>Caracter√≠sticas de la Marcha</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="marcha-normal" onchange="updateDashboard()"><label for="marcha-normal">Marcha normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-hemiparesica" onchange="updateDashboard()"><label for="marcha-hemiparesica">Marcha hemipar√©sica</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-paraparesica" onchange="updateDashboard()"><label for="marcha-paraparesica">Marcha parapar√©sica</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-ataxica" onchange="updateDashboard()"><label for="marcha-ataxica">Marcha at√°xica</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-parkinsoniana" onchange="updateDashboard()"><label for="marcha-parkinsoniana">Marcha parkinsoniana</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-festinante" onchange="updateDashboard()"><label for="marcha-festinante">Marcha festinante</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-steppage" onchange="updateDashboard()"><label for="marcha-steppage">Marcha en steppage</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-trendelenburg" onchange="updateDashboard()"><label for="marcha-trendelenburg">Marcha de Trendelenburg</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="marcha-antalgica" onchange="updateDashboard()"><label for="marcha-antalgica">Marcha ant√°lgica</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="imposibilidad-marcha" onchange="updateDashboard()"><label for="imposibilidad-marcha">Imposibilidad para la marcha</label></div>
                        </div>
                        <div class="test-results">
                            <div class="test-item">
                                <label>Prueba de Romberg</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="romberg-negativo" onchange="handleMutuallyExclusive('romberg-negativo', 'romberg-positivo', this)"><span class="negative">Negativo</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="romberg-positivo" onchange="handleMutuallyExclusive('romberg-negativo', 'romberg-positivo', this)"><span class="positive">Positivo</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>Marcha en t√°ndem</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="tandem-normal" onchange="handleMutuallyExclusive('tandem-normal', 'tandem-alterado', this)"><span class="negative">Normal</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="tandem-alterado" onchange="handleMutuallyExclusive('tandem-normal', 'tandem-alterado', this)"><span class="positive">Alterado</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="section" id="motor-reflexes-section">
            <div class="section-header" onclick="toggleSection(this)">
                <span><i class="fas fa-running"></i> Sistema Motor y Reflejos</span>
                <div style="display: flex; align-items: center;">
                    <div class="completion-badge" id="badge-motor-reflexes">
                        <i class="fas fa-circle"></i>
                    </div>
                    <span class="arrow">‚ñº</span>
                </div>
            </div>
            <div class="section-content" id="motor-reflexes">
                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-dumbbell"></i> Evaluaci√≥n de Fuerza Muscular</div>
                    <div class="motor-assessment">
                        <h4>Escala de Fuerza Muscular (0-5)</h4>
                        <div class="bilateral-container">
                            <div class="side-container">
                                <div class="side-header">Lado Derecho</div>
                                <div class="strength-grid">
                                    <div class="strength-group">
                                        <h5>Extremidad Superior</h5>
                                        <div class="strength-item">
                                            <span>Deltoides</span>
                                            <select class="strength-select" id="deltoides-der" onchange="calculateMotorScore()"><label for="deltoides-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>B√≠ceps</span>
                                            <select class="strength-select" id="biceps-der" onchange="calculateMotorScore()"><label for="biceps-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Tr√≠ceps</span>
                                            <select class="strength-select" id="triceps-der" onchange="calculateMotorScore()"><label for="triceps-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Flexores mu√±eca</span>
                                            <select class="strength-select" id="flexores-muneca-der" onchange="calculateMotorScore()"><label for="flexores-muneca-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Extensores mu√±eca</span>
                                            <select class="strength-select" id="extensores-muneca-der" onchange="calculateMotorScore()"><label for="extensores-muneca-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Inter√≥seos</span>
                                            <select class="strength-select" id="interoseos-der" onchange="calculateMotorScore()"><label for="interoseos-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="strength-group">
                                        <h5>Extremidad Inferior</h5>
                                        <div class="strength-item">
                                            <span>Iliopsoas</span>
                                            <select class="strength-select" id="iliopsoas-der" onchange="calculateMotorScore()"><label for="iliopsoas-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Cu√°driceps</span>
                                            <select class="strength-select" id="cuadriceps-der" onchange="calculateMotorScore()"><label for="cuadriceps-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Isquiotibiales</span>
                                            <select class="strength-select" id="isquiotibiales-der" onchange="calculateMotorScore()"><label for="isquiotibiales-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Tibial anterior</span>
                                            <select class="strength-select" id="tibial-anterior-der" onchange="calculateMotorScore()"><label for="tibial-anterior-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Gastrocnemio</span>
                                            <select class="strength-select" id="gastrocnemio-der" onchange="calculateMotorScore()"><label for="gastrocnemio-der"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="side-container">
                                <div class="side-header">Lado Izquierdo</div>
                                <div class="strength-grid">
                                    <div class="strength-group">
                                        <h5>Extremidad Superior</h5>
                                        <div class="strength-item">
                                            <span>Deltoides</span>
                                            <select class="strength-select" id="deltoides-izq" onchange="calculateMotorScore()"><label for="deltoides-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>B√≠ceps</span>
                                            <select class="strength-select" id="biceps-izq" onchange="calculateMotorScore()"><label for="biceps-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Tr√≠ceps</span>
                                            <select class="strength-select" id="triceps-izq" onchange="calculateMotorScore()"><label for="triceps-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Flexores mu√±eca</span>
                                            <select class="strength-select" id="flexores-muneca-izq" onchange="calculateMotorScore()"><label for="flexores-muneca-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Extensores mu√±eca</span>
                                            <select class="strength-select" id="extensores-muneca-izq" onchange="calculateMotorScore()"><label for="extensores-muneca-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Inter√≥seos</span>
                                            <select class="strength-select" id="interoseos-izq" onchange="calculateMotorScore()"><label for="interoseos-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="strength-group">
                                        <h5>Extremidad Inferior</h5>
                                        <div class="strength-item">
                                            <span>Iliopsoas</span>
                                            <select class="strength-select" id="iliopsoas-izq" onchange="calculateMotorScore()"><label for="iliopsoas-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Cu√°driceps</span>
                                            <select class="strength-select" id="cuadriceps-izq" onchange="calculateMotorScore()"><label for="cuadriceps-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Isquiotibiales</span>
                                            <select class="strength-select" id="isquiotibiales-izq" onchange="calculateMotorScore()"><label for="isquiotibiales-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Tibial anterior</span>
                                            <select class="strength-select" id="tibial-anterior-izq" onchange="calculateMotorScore()"><label for="tibial-anterior-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                        <div class="strength-item">
                                            <span>Gastrocnemio</span>
                                            <select class="strength-select" id="gastrocnemio-izq" onchange="calculateMotorScore()"><label for="gastrocnemio-izq"></label>
                                                <option value="">-</option>
                                                <option value="0">0</option>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="score-item">
                            <span>Promedio fuerza general:</span>
                            <span class="score-value" id="average-strength">--</span>
                            <span>/5</span>
                        </div>
                    </div>

                    <div class="motor-assessment">
                        <h4>Tono Muscular y Movimientos Anormales</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item"><input type="checkbox" id="tono-normal" onchange="updateDashboard()"><label for="tono-normal">Tono normal</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="hipertonia" onchange="updateDashboard()"><label for="hipertonia">Hiperton√≠a</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="hipotonia" onchange="updateDashboard()"><label for="hipotonia">Hipoton√≠a</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="rigidez" onchange="updateDashboard()"><label for="rigidez">Rigidez</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="espasticidad" onchange="updateDashboard()"><label for="espasticidad">Espasticidad</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="temblor-reposo" onchange="updateDashboard()"><label for="temblor-reposo">Temblor de reposo</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="temblor-accion" onchange="updateDashboard()"><label for="temblor-accion">Temblor de acci√≥n</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="temblor-intencion" onchange="updateDashboard()"><label for="temblor-intencion">Temblor de intenci√≥n</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="corea" onchange="updateDashboard()"><label for="corea">Corea</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="atetosis" onchange="updateDashboard()"><label for="atetosis">Atetosis</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="distonias" onchange="updateDashboard()"><label for="distonias">Diston√≠as</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="mioclonias" onchange="updateDashboard()"><label for="mioclonias">Mioclon√≠as</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="tics" onchange="updateDashboard()"><label for="tics">Tics</label></div>
                            <div class="checkbox-item"><input type="checkbox" id="fasciculaciones" onchange="updateDashboard()"><label for="fasciculaciones">Fasciculaciones</label></div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-hand-point-right"></i> Reflejos Osteotendinosos</div>
                    <div class="reflexes-assessment">
                        <h4>Escala de Reflejos (0-4+)</h4>
                        <div class="reflex-grid">
                            <div class="reflex-side">
                                <h6>Lado Derecho</h6>
                                <div class="reflex-item">
                                    <span>Bicipital (C5-C6)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="bicipital-der" id="bicipital-der-0" value="0" onchange="updateDashboard()">
                                        <label for="bicipital-der-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="bicipital-der" id="bicipital-der-1" value="1" onchange="updateDashboard()">
                                        <label for="bicipital-der-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="bicipital-der" id="bicipital-der-2" value="2" onchange="updateDashboard()">
                                        <label for="bicipital-der-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="bicipital-der" id="bicipital-der-3" value="3" onchange="updateDashboard()">
                                        <label for="bicipital-der-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="bicipital-der" id="bicipital-der-4" value="4" onchange="updateDashboard()">
                                        <label for="bicipital-der-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Tricipital (C6-C8)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="tricipital-der" id="tricipital-der-0" value="0" onchange="updateDashboard()">
                                        <label for="tricipital-der-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="tricipital-der" id="tricipital-der-1" value="1" onchange="updateDashboard()">
                                        <label for="tricipital-der-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="tricipital-der" id="tricipital-der-2" value="2" onchange="updateDashboard()">
                                        <label for="tricipital-der-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="tricipital-der" id="tricipital-der-3" value="3" onchange="updateDashboard()">
                                        <label for="tricipital-der-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="tricipital-der" id="tricipital-der-4" value="4" onchange="updateDashboard()">
                                        <label for="tricipital-der-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Braquiorradial (C5-C6)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="braquiorradial-der" id="braquiorradial-der-0" value="0" onchange="updateDashboard()">
                                        <label for="braquiorradial-der-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="braquiorradial-der" id="braquiorradial-der-1" value="1" onchange="updateDashboard()">
                                        <label for="braquiorradial-der-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="braquiorradial-der" id="braquiorradial-der-2" value="2" onchange="updateDashboard()">
                                        <label for="braquiorradial-der-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="braquiorradial-der" id="braquiorradial-der-3" value="3" onchange="updateDashboard()">
                                        <label for="braquiorradial-der-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="braquiorradial-der" id="braquiorradial-der-4" value="4" onchange="updateDashboard()">
                                        <label for="braquiorradial-der-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Rotuliano (L2-L4)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="rotuliano-der" id="rotuliano-der-0" value="0" onchange="updateDashboard()">
                                        <label for="rotuliano-der-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="rotuliano-der" id="rotuliano-der-1" value="1" onchange="updateDashboard()">
                                        <label for="rotuliano-der-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="rotuliano-der" id="rotuliano-der-2" value="2" onchange="updateDashboard()">
                                        <label for="rotuliano-der-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="rotuliano-der" id="rotuliano-der-3" value="3" onchange="updateDashboard()">
                                        <label for="rotuliano-der-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="rotuliano-der" id="rotuliano-der-4" value="4" onchange="updateDashboard()">
                                        <label for="rotuliano-der-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Aqu√≠leo (S1-S2)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="aquileo-der" id="aquileo-der-0" value="0" onchange="updateDashboard()">
                                        <label for="aquileo-der-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="aquileo-der" id="aquileo-der-1" value="1" onchange="updateDashboard()">
                                        <label for="aquileo-der-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="aquileo-der" id="aquileo-der-2" value="2" onchange="updateDashboard()">
                                        <label for="aquileo-der-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="aquileo-der" id="aquileo-der-3" value="3" onchange="updateDashboard()">
                                        <label for="aquileo-der-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="aquileo-der" id="aquileo-der-4" value="4" onchange="updateDashboard()">
                                        <label for="aquileo-der-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="reflex-side">
                                <h6>Lado Izquierdo</h6>
                                <div class="reflex-item">
                                    <span>Bicipital (C5-C6)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="bicipital-izq" id="bicipital-izq-0" value="0" onchange="updateDashboard()">
                                        <label for="bicipital-izq-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="bicipital-izq" id="bicipital-izq-1" value="1" onchange="updateDashboard()">
                                        <label for="bicipital-izq-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="bicipital-izq" id="bicipital-izq-2" value="2" onchange="updateDashboard()">
                                        <label for="bicipital-izq-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="bicipital-izq" id="bicipital-izq-3" value="3" onchange="updateDashboard()">
                                        <label for="bicipital-izq-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="bicipital-izq" id="bicipital-izq-4" value="4" onchange="updateDashboard()">
                                        <label for="bicipital-izq-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Tricipital (C6-C8)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="tricipital-izq" id="tricipital-izq-0" value="0" onchange="updateDashboard()">
                                        <label for="tricipital-izq-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="tricipital-izq" id="tricipital-izq-1" value="1" onchange="updateDashboard()">
                                        <label for="tricipital-izq-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="tricipital-izq" id="tricipital-izq-2" value="2" onchange="updateDashboard()">
                                        <label for="tricipital-izq-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="tricipital-izq" id="tricipital-izq-3" value="3" onchange="updateDashboard()">
                                        <label for="tricipital-izq-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="tricipital-izq" id="tricipital-izq-4" value="4" onchange="updateDashboard()">
                                        <label for="tricipital-izq-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Braquiorradial (C5-C6)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="braquiorradial-izq" id="braquiorradial-izq-0" value="0" onchange="updateDashboard()">
                                        <label for="braquiorradial-izq-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="braquiorradial-izq" id="braquiorradial-izq-1" value="1" onchange="updateDashboard()">
                                        <label for="braquiorradial-izq-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="braquiorradial-izq" id="braquiorradial-izq-2" value="2" onchange="updateDashboard()">
                                        <label for="braquiorradial-izq-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="braquiorradial-izq" id="braquiorradial-izq-3" value="3" onchange="updateDashboard()">
                                        <label for="braquiorradial-izq-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="braquiorradial-izq" id="braquiorradial-izq-4" value="4" onchange="updateDashboard()">
                                        <label for="braquiorradial-izq-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Rotuliano (L2-L4)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="rotuliano-izq" id="rotuliano-izq-0" value="0" onchange="updateDashboard()">
                                        <label for="rotuliano-izq-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="rotuliano-izq" id="rotuliano-izq-1" value="1" onchange="updateDashboard()">
                                        <label for="rotuliano-izq-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="rotuliano-izq" id="rotuliano-izq-2" value="2" onchange="updateDashboard()">
                                        <label for="rotuliano-izq-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="rotuliano-izq" id="rotuliano-izq-3" value="3" onchange="updateDashboard()">
                                        <label for="rotuliano-izq-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="rotuliano-izq" id="rotuliano-izq-4" value="4" onchange="updateDashboard()">
                                        <label for="rotuliano-izq-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                                <div class="reflex-item">
                                    <span>Aqu√≠leo (S1-S2)</span>
                                    <div class="reflex-scale">
                                        <input type="radio" name="aquileo-izq" id="aquileo-izq-0" value="0" onchange="updateDashboard()">
                                        <label for="aquileo-izq-0" style="font-size: 9px;">0</label>
                                        <input type="radio" name="aquileo-izq" id="aquileo-izq-1" value="1" onchange="updateDashboard()">
                                        <label for="aquileo-izq-1" style="font-size: 9px;">1+</label>
                                        <input type="radio" name="aquileo-izq" id="aquileo-izq-2" value="2" onchange="updateDashboard()">
                                        <label for="aquileo-izq-2" style="font-size: 9px;">2+</label>
                                        <input type="radio" name="aquileo-izq" id="aquileo-izq-3" value="3" onchange="updateDashboard()">
                                        <label for="aquileo-izq-3" style="font-size: 9px;">3+</label>
                                        <input type="radio" name="aquileo-izq" id="aquileo-izq-4" value="4" onchange="updateDashboard()">
                                        <label for="aquileo-izq-4" style="font-size: 9px;">4+</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="reflexes-assessment">
                        <h4>Reflejos Patol√≥gicos</h4>
                        <div class="test-results">
                            <div class="test-item">
                                <label>Babinski</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="babinski-der-pos" onchange="handleMutuallyExclusive('babinski-der-pos', 'babinski-der-neg', this)"><span class="positive">Derecho +</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="babinski-der-neg" onchange="handleMutuallyExclusive('babinski-der-pos', 'babinski-der-neg', this)"><span class="negative">Derecho -</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="babinski-izq-pos" onchange="handleMutuallyExclusive('babinski-izq-pos', 'babinski-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="babinski-izq-neg" onchange="handleMutuallyExclusive('babinski-izq-pos', 'babinski-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>Hoffmann</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="hoffmann-der-pos" onchange="handleMutuallyExclusive('hoffmann-der-pos', 'hoffmann-der-neg', this)"><span class="positive">Derecho +</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="hoffmann-der-neg" onchange="handleMutuallyExclusive('hoffmann-der-pos', 'hoffmann-der-neg', this)"><span class="negative">Derecho -</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="hoffmann-izq-pos" onchange="handleMutuallyExclusive('hoffmann-izq-pos', 'hoffmann-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="hoffmann-izq-neg" onchange="handleMutuallyExclusive('hoffmann-izq-pos', 'hoffmann-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                                </div>
                            </div>
                            <div class="test-item">
                                <label>Clonus</label>
                                <div class="test-controls">
                                    <div class="test-checkbox"><input type="checkbox" id="clonus-der-pos" onchange="handleMutuallyExclusive('clonus-der-pos', 'clonus-der-neg', this)"><span class="positive">Derecho +</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="clonus-der-neg" onchange="handleMutuallyExclusive('clonus-der-pos', 'clonus-der-neg', this)"><span class="negative">Derecho -</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="clonus-izq-pos" onchange="handleMutuallyExclusive('clonus-izq-pos', 'clonus-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                    <div class="test-checkbox"><input type="checkbox" id="clonus-izq-neg" onchange="handleMutuallyExclusive('clonus-izq-pos', 'clonus-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="sensory-coordination-section">
            <div class="section-header" onclick="toggleSection(this)">
                <span><i class="fas fa-hand-sparkles"></i> Sistema Sensitivo y Coordinaci√≥n</span>
                <div style="display: flex; align-items: center;">
                    <div class="completion-badge" id="badge-sensory-coordination">
                        <i class="fas fa-circle"></i>
                    </div>
                    <span class="arrow">‚ñº</span>
                </div>
            </div>
            <div class="section-content" id="sensory-coordination">
                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-hand"></i> Sensibilidad</div>
                    <div class="bilateral-container">
                        <div class="side-container">
                            <div class="side-header">Lado Derecho</div>
                            <div class="test-results">
                                <div class="test-item">
                                    <label>Sensibilidad t√°ctil</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="tactil-der-normal" onchange="handleMutuallyExclusive('tactil-der-normal', 'tactil-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="tactil-der-alterada" onchange="handleMutuallyExclusive('tactil-der-normal', 'tactil-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Sensibilidad dolorosa</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="dolorosa-der-normal" onchange="handleMutuallyExclusive('dolorosa-der-normal', 'dolorosa-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="dolorosa-der-alterada" onchange="handleMutuallyExclusive('dolorosa-der-normal', 'dolorosa-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Sensibilidad t√©rmica</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="termica-der-normal" onchange="handleMutuallyExclusive('termica-der-normal', 'termica-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="termica-der-alterada" onchange="handleMutuallyExclusive('termica-der-normal', 'termica-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Sensibilidad vibratoria</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="vibratoria-der-normal" onchange="handleMutuallyExclusive('vibratoria-der-normal', 'vibratoria-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="vibratoria-der-alterada" onchange="handleMutuallyExclusive('vibratoria-der-normal', 'vibratoria-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Propiocepc√≠on</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="propiocepcion-der-normal" onchange="handleMutuallyExclusive('propiocepcion-der-normal', 'propiocepcion-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="propiocepcion-der-alterada" onchange="handleMutuallyExclusive('propiocepcion-der-normal', 'propiocepcion-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Discriminaci√≥n tactil</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="discriminacion-der-normal" onchange="handleMutuallyExclusive('discriminacion-der-normal', 'discriminacion-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="discriminacion-der-alterada" onchange="handleMutuallyExclusive('discriminacion-der-normal', 'discriminacion-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="side-container">
                            <div class="side-header">Lado Izquierdo</div>
                            <div class="test-results">
                                <div class="test-item">
                                    <label>Sensibilidad t√°ctil</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="tactil-izq-normal" onchange="handleMutuallyExclusive('tactil-izq-normal', 'tactil-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="tactil-izq-alterada" onchange="handleMutuallyExclusive('tactil-izq-normal', 'tactil-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Sensibilidad dolorosa</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="dolorosa-izq-normal" onchange="handleMutuallyExclusive('dolorosa-izq-normal', 'dolorosa-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="dolorosa-izq-alterada" onchange="handleMutuallyExclusive('dolorosa-izq-normal', 'dolorosa-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Sensibilidad t√©rmica</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="termica-izq-normal" onchange="handleMutuallyExclusive('termica-izq-normal', 'termica-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="termica-izq-alterada" onchange="handleMutuallyExclusive('termica-izq-normal', 'termica-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Sensibilidad vibratoria</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="vibratoria-izq-normal" onchange="handleMutuallyExclusive('vibratoria-izq-normal', 'vibratoria-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="vibratoria-izq-alterada" onchange="handleMutuallyExclusive('vibratoria-izq-normal', 'vibratoria-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Propiocepc√≠on</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="propiocepcion-izq-normal" onchange="handleMutuallyExclusive('propiocepcion-izq-normal', 'propiocepcion-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="propiocepcion-izq-alterada" onchange="handleMutuallyExclusive('propiocepcion-izq-normal', 'propiocepcion-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Discriminaci√≥n tactil</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="discriminacion-izq-normal" onchange="handleMutuallyExclusive('discriminacion-izq-normal', 'discriminacion-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="discriminacion-izq-alterada" onchange="handleMutuallyExclusive('discriminacion-izq-normal', 'discriminacion-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-balance-scale-left"></i> Coordinaci√≥n y Cerebelo</div>
                    <div class="bilateral-container">
                        <div class="side-container">
                            <div class="side-header">Lado Derecho</div>
                            <div class="test-results">
                                <div class="test-item">
                                    <label>√çndice-nariz</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="indice-nariz-der-normal" onchange="handleMutuallyExclusive('indice-nariz-der-normal', 'indice-nariz-der-alterado', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="indice-nariz-der-alterado" onchange="handleMutuallyExclusive('indice-nariz-der-normal', 'indice-nariz-der-alterado', this)"><span class="positive">Alterado</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Diadococinesia</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="diadococinesia-der-normal" onchange="handleMutuallyExclusive('diadococinesia-der-normal', 'diadococinesia-der-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="diadococinesia-der-alterada" onchange="handleMutuallyExclusive('diadococinesia-der-normal', 'diadococinesia-der-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Tal√≥n-rodilla</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="talon-rodilla-der-normal" onchange="handleMutuallyExclusive('talon-rodilla-der-normal', 'talon-rodilla-der-alterado', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="talon-rodilla-der-alterado" onchange="handleMutuallyExclusive('talon-rodilla-der-normal', 'talon-rodilla-der-alterado', this)"><span class="positive">Alterado</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Rebote</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="rebote-der-normal" onchange="handleMutuallyExclusive('rebote-der-normal', 'rebote-der-alterado', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="rebote-der-alterado" onchange="handleMutuallyExclusive('rebote-der-normal', 'rebote-der-alterado', this)"><span class="positive">Alterado</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="side-container">
                            <div class="side-header">Lado Izquierdo</div>
                            <div class="test-results">
                                <div class="test-item">
                                    <label>√çndice-nariz</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="indice-nariz-izq-normal" onchange="handleMutuallyExclusive('indice-nariz-izq-normal', 'indice-nariz-izq-alterado', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="indice-nariz-izq-alterado" onchange="handleMutuallyExclusive('indice-nariz-izq-normal', 'indice-nariz-izq-alterado', this)"><span class="positive">Alterado</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Diadococinesia</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="diadococinesia-izq-normal" onchange="handleMutuallyExclusive('diadococinesia-izq-normal', 'diadococinesia-izq-alterada', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="diadococinesia-izq-alterada" onchange="handleMutuallyExclusive('diadococinesia-izq-normal', 'diadococinesia-izq-alterada', this)"><span class="positive">Alterada</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Tal√≥n-rodilla</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="talon-rodilla-izq-normal" onchange="handleMutuallyExclusive('talon-rodilla-izq-normal', 'talon-rodilla-izq-alterado', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="talon-rodilla-izq-alterado" onchange="handleMutuallyExclusive('talon-rodilla-izq-normal', 'talon-rodilla-izq-alterado', this)"><span class="positive">Alterado</span></div>
                                    </div>
                                </div>
                                <div class="test-item">
                                    <label>Rebote</label>
                                    <div class="test-controls">
                                        <div class="test-checkbox"><input type="checkbox" id="rebote-izq-normal" onchange="handleMutuallyExclusive('rebote-izq-normal', 'rebote-izq-alterado', this)"><span class="negative">Normal</span></div>
                                        <div class="test-checkbox"><input type="checkbox" id="rebote-izq-alterado" onchange="handleMutuallyExclusive('rebote-izq-normal', 'rebote-izq-alterado', this)"><span class="positive">Alterado</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="neurological-scales-section">
            <div class="section-header" onclick="toggleSection(this)">
                <span><i class="fas fa-balance-scale"></i> Escalas Neurol√≥gicas</span>
                <div style="display: flex; align-items: center;">
                    <div class="completion-badge" id="badge-neurological-scales">
                        <i class="fas fa-circle"></i>
                    </div>
                    <span class="arrow">‚ñº</span>
                </div>
            </div>
            <div class="section-content" id="neurological-scales">
                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-brain"></i> Escala de Coma de Glasgow</div>
                    <div class="score-calculation">
                        <h4>Componentes del GCS (3-15 puntos)</h4>
                        <div class="exam-section">
                            <h4>Apertura Ocular (1-4 puntos)</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="glasgow-ocular" id="ocular-1" value="1" onchange="calculateGlasgow()"><label for="ocular-1">No abre (1)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-ocular" id="ocular-2" value="2" onchange="calculateGlasgow()"><label for="ocular-2">Al dolor (2)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-ocular" id="ocular-3" value="3" onchange="calculateGlasgow()"><label for="ocular-3">A la voz (3)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-ocular" id="ocular-4" value="4" onchange="calculateGlasgow()"><label for="ocular-4">Espont√°nea (4)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>Respuesta Verbal (1-5 puntos)</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="glasgow-verbal" id="verbal-1" value="1" onchange="calculateGlasgow()"><label for="verbal-1">Sin respuesta (1)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-verbal" id="verbal-2" value="2" onchange="calculateGlasgow()"><label for="verbal-2">Sonidos incomprensibles (2)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-verbal" id="verbal-3" value="3" onchange="calculateGlasgow()"><label for="verbal-3">Palabras inapropiadas (3)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-verbal" id="verbal-4" value="4" onchange="calculateGlasgow()"><label for="verbal-4">Confuso (4)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-verbal" id="verbal-5" value="5" onchange="calculateGlasgow()"><label for="verbal-5">Orientado (5)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>Respuesta Motora (1-6 puntos)</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="glasgow-motor" id="motor-1" value="1" onchange="calculateGlasgow()"><label for="motor-1">Sin respuesta (1)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-motor" id="motor-2" value="2" onchange="calculateGlasgow()"><label for="motor-2">Extensi√≥n (2)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-motor" id="motor-3" value="3" onchange="calculateGlasgow()"><label for="motor-3">Flexi√≥n anormal (3)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-motor" id="motor-4" value="4" onchange="calculateGlasgow()"><label for="motor-4">Retirada al dolor (4)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-motor" id="motor-5" value="5" onchange="calculateGlasgow()"><label for="motor-5">Localiza dolor (5)</label></div>
                                <div class="severity-item"><input type="radio" name="glasgow-motor" id="motor-6" value="6" onchange="calculateGlasgow()"><label for="motor-6">Obedece √≥rdenes (6)</label></div>
                            </div>
                        </div>
                        <div class="score-item">
                            <span>Glasgow Total:</span>
                            <span class="score-value" id="glasgow-score">0</span>
                            <span>/15 puntos</span>
                        </div>
                        <div class="score-item">
                            <span>Severidad:</span>
                            <span class="score-value" id="glasgow-severity">--</span>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header">NIHSS - National Institutes of Health Stroke Scale</div>
                    <div class="score-calculation">
                        <h4>Evaluaci√≥n de ACV (0-42 puntos)</h4>
                        <div class="exam-section">
                            <h4>1a. Nivel de Conciencia</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-conciencia" id="conciencia-0" value="0" onchange="calculateNIHSS()"><label for="conciencia-0">Alerta (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-conciencia" id="conciencia-1" value="1" onchange="calculateNIHSS()"><label for="conciencia-1">Somnoliento (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-conciencia" id="conciencia-2" value="2" onchange="calculateNIHSS()"><label for="conciencia-2">Estupor (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-conciencia" id="conciencia-3" value="3" onchange="calculateNIHSS()"><label for="conciencia-3">Coma (3)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>1b. Preguntas de Orientaci√≥n</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-orientacion" id="orientacion-0" value="0" onchange="calculateNIHSS()"><label for="orientacion-0">Ambas correctas (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-orientacion" id="orientacion-1" value="1" onchange="calculateNIHSS()"><label for="orientacion-1">Una correcta (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-orientacion" id="orientacion-2" value="2" onchange="calculateNIHSS()"><label for="orientacion-2">Ninguna correcta (2)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>1c. √ìrdenes</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-ordenes" id="ordenes-0" value="0" onchange="calculateNIHSS()"><label for="ordenes-0">Ambas correctas (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-ordenes" id="ordenes-1" value="1" onchange="calculateNIHSS()"><label for="ordenes-1">Una correcta (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-ordenes" id="ordenes-2" value="2" onchange="calculateNIHSS()"><label for="ordenes-2">Ninguna correcta (2)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>2. Mirada Conjugada</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-mirada" id="mirada-0" value="0" onchange="calculateNIHSS()"><label for="mirada-0">Normal (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-mirada" id="mirada-1" value="1" onchange="calculateNIHSS()"><label for="mirada-1">Par√°lisis parcial (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-mirada" id="mirada-2" value="2" onchange="calculateNIHSS()"><label for="mirada-2">Desviaci√≥n forzada (2)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>3. Campos Visuales</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-campos" id="campos-0" value="0" onchange="calculateNIHSS()"><label for="campos-0">Sin defecto (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-campos" id="campos-1" value="1" onchange="calculateNIHSS()"><label for="campos-1">Hemianopsia parcial (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-campos" id="campos-2" value="2" onchange="calculateNIHSS()"><label for="campos-2">Hemianopsia completa (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-campos" id="campos-3" value="3" onchange="calculateNIHSS()"><label for="campos-3">Hemianopsia bilateral (3)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>4. Par√°lisis Facial</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-facial" id="facial-0" value="0" onchange="calculateNIHSS()"><label for="facial-0">Normal (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-facial" id="facial-1" value="1" onchange="calculateNIHSS()"><label for="facial-1">Par√°lisis menor (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-facial" id="facial-2" value="2" onchange="calculateNIHSS()"><label for="facial-2">Par√°lisis parcial (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-facial" id="facial-3" value="3" onchange="calculateNIHSS()"><label for="facial-3">Par√°lisis completa (3)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>5a. Motor Brazo Izquierdo</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-brazo-izq" id="brazo-izq-0" value="0" onchange="calculateNIHSS()"><label for="brazo-izq-0">Sin debilidad (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-izq" id="brazo-izq-1" value="1" onchange="calculateNIHSS()"><label for="brazo-izq-1">Claudicaci√≥n (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-izq" id="brazo-izq-2" value="2" onchange="calculateNIHSS()"><label for="brazo-izq-2">Esfuerzo contra gravedad (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-izq" id="brazo-izq-3" value="3" onchange="calculateNIHSS()"><label for="brazo-izq-3">Sin esfuerzo contra gravedad (3)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-izq" id="brazo-izq-4" value="4" onchange="calculateNIHSS()"><label for="brazo-izq-4">Sin movimiento (4)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>5b. Motor Brazo Derecho</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-brazo-der" id="brazo-der-0" value="0" onchange="calculateNIHSS()"><label for="brazo-der-0">Sin debilidad (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-der" id="brazo-der-1" value="1" onchange="calculateNIHSS()"><label for="brazo-der-1">Claudicaci√≥n (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-der" id="brazo-der-2" value="2" onchange="calculateNIHSS()"><label for="brazo-der-2">Esfuerzo contra gravedad (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-der" id="brazo-der-3" value="3" onchange="calculateNIHSS()"><label for="brazo-der-3">Sin esfuerzo contra gravedad (3)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-brazo-der" id="brazo-der-4" value="4" onchange="calculateNIHSS()"><label for="brazo-der-4">Sin movimiento (4)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>6a. Motor Pierna Izquierda</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-pierna-izq" id="pierna-izq-0" value="0" onchange="calculateNIHSS()"><label for="pierna-izq-0">Sin debilidad (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-izq" id="pierna-izq-1" value="1" onchange="calculateNIHSS()"><label for="pierna-izq-1">Claudicaci√≥n (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-izq" id="pierna-izq-2" value="2" onchange="calculateNIHSS()"><label for="pierna-izq-2">Esfuerzo contra gravedad (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-izq" id="pierna-izq-3" value="3" onchange="calculateNIHSS()"><label for="pierna-izq-3">Sin esfuerzo contra gravedad (3)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-izq" id="pierna-izq-4" value="4" onchange="calculateNIHSS()"><label for="pierna-izq-4">Sin movimiento (4)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>6b. Motor Pierna Derecha</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-pierna-der" id="pierna-der-0" value="0" onchange="calculateNIHSS()"><label for="pierna-der-0">Sin debilidad (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-der" id="pierna-der-1" value="1" onchange="calculateNIHSS()"><label for="pierna-der-1">Claudicaci√≥n (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-der" id="pierna-der-2" value="2" onchange="calculateNIHSS()"><label for="pierna-der-2">Esfuerzo contra gravedad (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-der" id="pierna-der-3" value="3" onchange="calculateNIHSS()"><label for="pierna-der-3">Sin esfuerzo contra gravedad (3)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-pierna-der" id="pierna-der-4" value="4" onchange="calculateNIHSS()"><label for="pierna-der-4">Sin movimiento (4)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>7. Ataxia</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-ataxia" id="ataxia-0" value="0" onchange="calculateNIHSS()"><label for="ataxia-0">Ausente (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-ataxia" id="ataxia-1" value="1" onchange="calculateNIHSS()"><label for="ataxia-1">Una extremidad (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-ataxia" id="ataxia-2" value="2" onchange="calculateNIHSS()"><label for="ataxia-2">Dos extremidades (2)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>8. Sensibilidad</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-sensibilidad" id="sensibilidad-0" value="0" onchange="calculateNIHSS()"><label for="sensibilidad-0">Normal (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-sensibilidad" id="sensibilidad-1" value="1" onchange="calculateNIHSS()"><label for="sensibilidad-1">P√©rdida leve a moderada (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-sensibilidad" id="sensibilidad-2" value="2" onchange="calculateNIHSS()"><label for="sensibilidad-2">P√©rdida severa a total (2)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>9. Lenguaje</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-lenguaje" id="lenguaje-0" value="0" onchange="calculateNIHSS()"><label for="lenguaje-0">Normal (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-lenguaje" id="lenguaje-1" value="1" onchange="calculateNIHSS()"><label for="lenguaje-1">Afasia leve a moderada (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-lenguaje" id="lenguaje-2" value="2" onchange="calculateNIHSS()"><label for="lenguaje-2">Afasia severa (2)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-lenguaje" id="lenguaje-3" value="3" onchange="calculateNIHSS()"><label for="lenguaje-3">Mudo, afasia global (3)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>10. Disartria</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-disartria" id="disartria-0" value="0" onchange="calculateNIHSS()"><label for="disartria-0">Normal (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-disartria" id="disartria-1" value="1" onchange="calculateNIHSS()"><label for="disartria-1">Leve a moderada (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-disartria" id="disartria-2" value="2" onchange="calculateNIHSS()"><label for="disartria-2">Severa (2)</label></div>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>11. Extinci√≥n/Inatenci√≥n</h4>
                            <div class="severity-grid">
                                <div class="severity-item"><input type="radio" name="nihss-extincion" id="extincion-0" value="0" onchange="calculateNIHSS()"><label for="extincion-0">Sin d√©ficit (0)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-extincion" id="extincion-1" value="1" onchange="calculateNIHSS()"><label for="extincion-1">Inatenci√≥n visual/t√°ctil/auditiva (1)</label></div>
                                <div class="severity-item"><input type="radio" name="nihss-extincion" id="extincion-2" value="2" onchange="calculateNIHSS()"><label for="extincion-2">Heminegligencia profunda (2)</label></div>
                            </div>
                        </div>
                        <div class="score-item">
                            <span>NIHSS Total:</span>
                            <span class="score-value" id="nihss-score">0</span>
                            <span>/42 puntos</span>
                        </div>
                        <div class="score-item">
                            <span>Severidad ACV:</span>
                            <span class="score-value" id="nihss-severity">--</span>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header">Mini-Mental State Examination (MMSE)</div>
                    <div class="score-calculation">
                        <h4>Evaluaci√≥n Cognitiva (0-30 puntos)</h4>
                        <div class="exam-section">
                            <h4>Orientaci√≥n (10 puntos)</h4>
                            <div class="measurement">
                                <label>Orientaci√≥n temporal:</label>
                                <input type="number" class="input-field" id="mmse-temporal" min="0" max="5" onchange="calculateMMSE()"><label for="mmse-temporal"></label>
                                <span>/5</span>
                            </div>
                            <div class="measurement">
                                <label>Orientaci√≥n espacial:</label>
                                <input type="number" class="input-field" id="mmse-espacial" min="0" max="5" onchange="calculateMMSE()"><label for="mmse-espacial"></label>
                                <span>/5</span>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>Registro (3 puntos)</h4>
                            <div class="measurement">
                                <label>Repetici√≥n de 3 palabras:</label>
                                <input type="number" class="input-field" id="mmse-registro" min="0" max="3" onchange="calculateMMSE()"><label for="mmse-registro"></label>
                                <span>/3</span>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>Atenci√≥n y C√°lculo (5 puntos)</h4>
                            <div class="measurement">
                                <label>Serie 7 o deletrear MUNDO:</label>
                                <input type="number" class="input-field" id="mmse-atencion" min="0" max="5" onchange="calculateMMSE()"><label for="mmse-atencion"></label>
                                <span>/5</span>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>Recuerdo (3 puntos)</h4>
                            <div class="measurement">
                                <label>Recuerdo de 3 palabras:</label>
                                <input type="number" class="input-field" id="mmse-recuerdo" min="0" max="3" onchange="calculateMMSE()"><label for="mmse-recuerdo"></label>
                                <span>/3</span>
                            </div>
                        </div>
                        <div class="exam-section">
                            <h4>Lenguaje (9 puntos)</h4>
                            <div class="measurement">
                                <label>Denominaci√≥n (2 objetos):</label>
                                <input type="number" class="input-field" id="mmse-denominacion" min="0" max="2" onchange="calculateMMSE()"><label for="mmse-denominacion"></label>
                                <span>/2</span>
                            </div>
                            <div class="measurement">
                                <label>Repetici√≥n:</label>
                                <input type="number" class="input-field" id="mmse-repeticion" min="0" max="1" onchange="calculateMMSE()"><label for="mmse-repeticion"></label>
                                <span>/1</span>
                            </div>
                            <div class="measurement">
                                <label>Comprensi√≥n (3 √≥rdenes):</label>
                                <input type="number" class="input-field" id="mmse-comprension" min="0" max="3" onchange="calculateMMSE()"><label for="mmse-comprension"></label>
                                <span>/3</span>
                            </div>
                            <div class="measurement">
                                <label>Lectura:</label>
                                <input type="number" class="input-field" id="mmse-lectura" min="0" max="1" onchange="calculateMMSE()"><label for="mmse-lectura"></label>
                                <span>/1</span>
                            </div>
                            <div class="measurement">
                                <label>Escritura:</label>
                                <input type="number" class="input-field" id="mmse-escritura" min="0" max="1" onchange="calculateMMSE()"><label for="mmse-escritura"></label>
                                <span>/1</span>
                            </div>
                            <div class="measurement">
                                <label>Copia de pent√°gonos:</label>
                                <input type="number" class="input-field" id="mmse-copia" min="0" max="1" onchange="calculateMMSE()"><label for="mmse-copia"></label>
                                <span>/1</span>
                            </div>
                        </div>
                        <div class="score-item">
                            <span>MMSE Total:</span>
                            <span class="score-value" id="mmse-score">0</span>
                            <span>/30 puntos</span>
                        </div>
                        <div class="score-item">
                            <span>Interpretaci√≥n:</span>
                            <span class="score-value" id="mmse-interpretation">--</span>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header">Escala MDS-UPDRS III (Parkinson)</div>
                    <div class="score-calculation">
                        <h4>Examen Motor (0-132 puntos)</h4>
                        <div class="measurement">
                            <label>Expresi√≥n facial:</label>
                            <select class="input-field" id="updrs-expresion" onchange="calculateUPDRS()"><label for="updrs-expresion"></label>
                                <option value="0">0 - Normal</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Leve-moderado</option>
                                <option value="3">3 - Moderado</option>
                                <option value="4">4 - Severo</option>
                            </select>
                        </div>
                        <div class="measurement">
                            <label>Temblor de reposo:</label>
                            <select class="input-field" id="updrs-temblor" onchange="calculateUPDRS()"><label for="updrs-temblor"></label>
                                <option value="0">0 - Normal</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Leve-moderado</option>
                                <option value="3">3 - Moderado</option>
                                <option value="4">4 - Severo</option>
                            </select>
                        </div>
                        <div class="measurement">
                            <label>Rigidez:</label>
                            <select class="input-field" id="updrs-rigidez" onchange="calculateUPDRS()"><label for="updrs-rigidez"></label>
                                <option value="0">0 - Ausente</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Leve-moderado</option>
                                <option value="3">3 - Moderado</option>
                                <option value="4">4 - Severo</option>
                            </select>
                        </div>
                        <div class="measurement">
                            <label>Bradicinesia:</label>
                            <select class="input-field" id="updrs-bradicinesia" onchange="calculateUPDRS()"><label for="updrs-bradicinesia"></label>
                                <option value="0">0 - Normal</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Leve-moderado</option>
                                <option value="3">3 - Moderado</option>
                                <option value="4">4 - Severo</option>
                            </select>
                        </div>
                        <div class="measurement">
                            <label>Inestabilidad postural:</label>
                            <select class="input-field" id="updrs-inestabilidad" onchange="calculateUPDRS()"><label for="updrs-inestabilidad"></label>
                                <option value="0">0 - Normal</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Leve-moderado</option>
                                <option value="3">3 - Moderado</option>
                                <option value="4">4 - Severo</option>
                            </select>
                        </div>
                        <div class="measurement">
                            <label>Marcha:</label>
                            <select class="input-field" id="updrs-marcha" onchange="calculateUPDRS()"><label for="updrs-marcha"></label>
                                <option value="0">0 - Normal</option>
                                <option value="1">1 - Leve</option>
                                <option value="2">2 - Leve-moderado</option>
                                <option value="3">3 - Moderado</option>
                                <option value="4">4 - Severo</option>
                            </select>
                        </div>
                        <div class="score-item">
                            <span>UPDRS III (muestra):</span>
                            <span class="score-value" id="updrs-score">0</span>
                            <span>/24 puntos</span>
                        </div>
                        <div class="score-item">
                            <span>Severidad:</span>
                            <span class="score-value" id="updrs-severity">--</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="special-neuro-tests-section">
            <div class="section-header" onclick="toggleSection(this)">
                <span><i class="fas fa-vial"></i> Pruebas Especiales Neurol√≥gicas</span>
                <div style="display: flex; align-items: center;">
                    <div class="completion-badge" id="badge-special-neuro-tests">
                        <i class="fas fa-circle"></i>
                    </div>
                    <span class="arrow">‚ñº</span>
                </div>
            </div>
            <div class="section-content" id="special-neuro-tests">
                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-head-side-virus"></i> Signos Men√≠ngeos</div>
                    <div class="test-results">
                        <div class="test-item">
                            <label>Rigidez de nuca</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="rigidez-nuca-pos" onchange="handleMutuallyExclusive('rigidez-nuca-pos', 'rigidez-nuca-neg', this)"><span class="positive">Positiva</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="rigidez-nuca-neg" onchange="handleMutuallyExclusive('rigidez-nuca-pos', 'rigidez-nuca-neg', this)"><span class="negative">Negativa</span></div>
                            </div>
                        </div>
                        <div class="test-item">
                            <label>Signo de Kernig</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="kernig-pos" onchange="handleMutuallyExclusive('kernig-pos', 'kernig-neg', this)"><span class="positive">Positivo</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="kernig-neg" onchange="handleMutuallyExclusive('kernig-pos', 'kernig-neg', this)"><span class="negative">Negativo</span></div>
                            </div>
                        </div>
                        <div class="test-item">
                            <label>Signo de Brudzinski</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="brudzinski-pos" onchange="handleMutuallyExclusive('brudzinski-pos', 'brudzinski-neg', this)"><span class="positive">Positivo</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="brudzinski-neg" onchange="handleMutuallyExclusive('brudzinski-pos', 'brudzinski-neg', this)"><span class="negative">Negativo</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-walking"></i> Pruebas de Coordinaci√≥n Avanzadas</div>
                    <div class="test-results">
                        <div class="test-item">
                            <label>Prueba de Stewart-Holmes (rebote)</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="stewart-holmes-der-pos" onchange="handleMutuallyExclusive('stewart-holmes-der-pos', 'stewart-holmes-der-neg', this)"><span class="positive">Derecho +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="stewart-holmes-der-neg" onchange="handleMutuallyExclusive('stewart-holmes-der-pos', 'stewart-holmes-der-neg', this)"><span class="negative">Derecho -</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="stewart-holmes-izq-pos" onchange="handleMutuallyExclusive('stewart-holmes-izq-pos', 'stewart-holmes-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="stewart-holmes-izq-neg" onchange="handleMutuallyExclusive('stewart-holmes-izq-pos', 'stewart-holmes-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                            </div>
                        </div>
                        <div class="test-item">
                            <label>Prueba de Barany (desviaci√≥n de √≠ndices)</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="barany-der-pos" onchange="handleMutuallyExclusive('barany-der-pos', 'barany-der-neg', this)"><span class="positive">Derecho +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="barany-der-neg" onchange="handleMutuallyExclusive('barany-der-pos', 'barany-der-neg', this)"><span class="negative">Derecho -</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="barany-izq-pos" onchange="handleMutuallyExclusive('barany-izq-pos', 'barany-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="barany-izq-neg" onchange="handleMutuallyExclusive('barany-izq-pos', 'barany-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                            </div>
                        </div>
                        <div class="test-item">
                            <label>Dismetr√≠a (finger-nose-finger)</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="dismetria-der-pos" onchange="handleMutuallyExclusive('dismetria-der-pos', 'dismetria-der-neg', this)"><span class="positive">Derecho +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="dismetria-der-neg" onchange="handleMutuallyExclusive('dismetria-der-pos', 'dismetria-der-neg', this)"><span class="negative">Derecho -</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="dismetria-izq-pos" onchange="handleMutuallyExclusive('dismetria-izq-pos', 'dismetria-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="dismetria-izq-neg" onchange="handleMutuallyExclusive('dismetria-izq-pos', 'dismetria-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exam-container">
                    <div class="exam-header"><i class="fas fa-nerve"></i> Pruebas de Nervio Perif√©rico</div>
                    <div class="test-results">
                        <div class="test-item">
                            <label>Signo de Tinel (t√∫nel carpiano)</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="tinel-der-pos" onchange="handleMutuallyExclusive('tinel-der-pos', 'tinel-der-neg', this)"><span class="positive">Derecho +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="tinel-der-neg" onchange="handleMutuallyExclusive('tinel-der-pos', 'tinel-der-neg', this)"><span class="negative">Derecho -</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="tinel-izq-pos" onchange="handleMutuallyExclusive('tinel-izq-pos', 'tinel-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="tinel-izq-neg" onchange="handleMutuallyExclusive('tinel-izq-pos', 'tinel-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                            </div>
                        </div>
                        <div class="test-item">
                            <label>Signo de Phalen (t√∫nel carpiano)</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="phalen-der-pos" onchange="handleMutuallyExclusive('phalen-der-pos', 'phalen-der-neg', this)"><span class="positive">Derecho +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="phalen-der-neg" onchange="handleMutuallyExclusive('phalen-der-pos', 'phalen-der-neg', this)"><span class="negative">Derecho -</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="phalen-izq-pos" onchange="handleMutuallyExclusive('phalen-izq-pos', 'phalen-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="phalen-izq-neg" onchange="handleMutuallyExclusive('phalen-izq-pos', 'phalen-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                            </div>
                        </div>
                        <div class="test-item">
                            <label>Signo de Las√®gue (ci√°tica)</label>
                            <div class="test-controls">
                                <div class="test-checkbox"><input type="checkbox" id="lasegue-der-pos" onchange="handleMutuallyExclusive('lasegue-der-pos', 'lasegue-der-neg', this)"><span class="positive">Derecho +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="lasegue-der-neg" onchange="handleMutuallyExclusive('lasegue-der-pos', 'lasegue-der-neg', this)"><span class="negative">Derecho -</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="lasegue-izq-pos" onchange="handleMutuallyExclusive('lasegue-izq-pos', 'lasegue-izq-neg', this)"><span class="positive">Izquierdo +</span></div>
                                <div class="test-checkbox"><input type="checkbox" id="lasegue-izq-neg" onchange="handleMutuallyExclusive('lasegue-izq-pos', 'lasegue-izq-neg', this)"><span class="negative">Izquierdo -</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="conclusion">
            <h3><i class="fas fa-file-medical-alt"></i> Conclusi√≥n del Examen Neurol√≥gico</h3>
            <div class="conclusion-text" id="conclusion-text">Seleccione los par√°metros del examen para generar la conclusi√≥n neurol√≥gica...</div>
        </div>
        
        <div class="control-buttons">
            <button class="btn btn-primary" onclick="generateConclusion()">
                <i class="fas fa-file-medical"></i> Generar Conclusi√≥n
            </button>
            <button class="btn btn-primary" onclick="printConclusion()">
                <i class="fas fa-print"></i> Imprimir Conclusi√≥n
            </button>
            <button class="btn btn-secondary" onclick="clearForm()">
                <i class="fas fa-trash"></i> Limpiar Formulario
            </button>
            <button class="btn btn-secondary" onclick="expandAllSections()">
                <i class="fas fa-expand-alt"></i> Expandir Todo
            </button>
            <button class="btn btn-secondary" onclick="collapseAllSections()">
                <i class="fas fa-compress-alt"></i> Contraer Todo
            </button>
        </div>
    </div>

    <script>
        // üé® Variables globales para el dashboard
        let examProgress = 0;
        let sectionsCompleted = 0;
        let alertCount = 0;
        let warningCount = 0;
        let findingsCount = 0;
        let gcsStatus = '--';
        let nihssStatus = '--';
        let mmseStatus = '--';

        // üåô Toggle de tema
        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (body.hasAttribute('data-theme')) {
                body.removeAttribute('data-theme');
                themeIcon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
            } else {
                body.setAttribute('data-theme', 'dark');
                themeIcon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
            }
        }

        // üéØ Toggle panel de navegaci√≥n
        function toggleNavPanel() {
            const navPanel = document.getElementById('nav-panel');
            const body = document.body;
            
            navPanel.classList.toggle('open');
            body.classList.toggle('split-view-nav-active');
        }

        // üìä FUNCIONES DEL PANEL STICKY
        // Toggle panel lateral sticky
        function toggleStickyPanel() {
            const stickyPanel = document.getElementById('stickyConclusion');
            const body = document.body;
            const btn = document.getElementById('sticky-toggle-btn');
            
            stickyPanel.classList.toggle('active');
            body.classList.toggle('split-view-sticky-active');
            
            if (stickyPanel.classList.contains('active')) {
                btn.innerHTML = '<i class="fas fa-window-restore"></i> Vista Normal';
                btn.classList.add('btn-warning');
                btn.classList.remove('btn-primary');
                generateStickyConclusion();
            } else {
                btn.innerHTML = '<i class="fas fa-columns"></i> Vista Dividida';
                btn.classList.add('btn-primary');
                btn.classList.remove('btn-warning');
            }
        }

        // Generar conclusi√≥n para panel sticky
        function generateStickyConclusion() {
            const stickyContent = document.getElementById('stickyContent');
            const updateIndicator = document.getElementById('updateIndicator');
            
            updateIndicator.classList.add('active');
            
            setTimeout(() => {
                const originalConclusionEl = document.getElementById('conclusion-text');
                const originalContent = originalConclusionEl.textContent;
                
                stickyContent.textContent = originalContent;
                
                updateIndicator.classList.remove('active');
            }, 300);
        }

        // Copiar contenido del panel sticky
        function copyStickyToClipboard() {
            const stickyContent = document.getElementById('stickyContent').textContent;
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(stickyContent).then(() => {
                    showCopyNotification();
                }).catch(err => {
                    console.error('Error al copiar con la API del portapapeles: ', err);
                    fallbackCopyToClipboard(stickyContent);
                });
            } else {
                fallbackCopyToClipboard(stickyContent);
            }
        }

        // Fallback para copiar
        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                document.execCommand('copy');
                showCopyNotification();
            } catch (err) {
                console.error('Error al usar el m√©todo de respaldo para copiar: ', err);
                alert('No se pudo copiar el texto. Por favor, c√≥pielo manualmente.');
            }

            document.body.removeChild(textArea);
        }

        // Mostrar notificaci√≥n de copia
        function showCopyNotification() {
            const notification = document.getElementById('copyNotification');
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2500);
        }

        // Imprimir desde panel sticky
        function printStickyConclusion() {
            const conclusion = document.getElementById('stickyContent').textContent;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Informe Neurol√≥gico</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            margin: 20px; 
                            line-height: 1.6;
                        }
                        pre { 
                            white-space: pre-wrap; 
                            font-family: 'Courier New', monospace; 
                            font-size: 12px;
                        }
                        .header {
                            text-align: center;
                            border-bottom: 2px solid var(--primary-color);
                            padding-bottom: 10px;
                            margin-bottom: 20px;
                        }
                        .footer {
                            text-align: center;
                            font-size: 10px;
                            color: #666;
                            margin-top: 20px;
                            border-top: 1px solid #ddd;
                            padding-top: 10px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Informe Neurol√≥gico</h1>
                        <p>Fecha: ${new Date().toLocaleDateString()}</p>
                        <p>Hora: ${new Date().toLocaleTimeString()}</p>
                    </div>
                    <pre>${conclusion}</pre>
                    <div class="footer">
                        <p>Generado por Sistema de Evaluaci√≥n Neurol√≥gica Premium</p>
                    </div>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // üß≠ Navegaci√≥n a secciones
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start',
                    inline: 'nearest'
                });
                
                const header = section.querySelector('.section-header');
                if (!header.classList.contains('expanded')) {
                    toggleSection(header);
                }
            }
        }

        // ‚úÖ Actualizar altura de secci√≥n
        function updateSectionHeight(contentElement) {
            if (contentElement && contentElement.classList.contains('expanded')) {
                setTimeout(() => {
                    contentElement.style.maxHeight = contentElement.scrollHeight + 'px';
                }, 50);
            }
        }

        // üìÇ Toggle de secciones mejorado
        function toggleSection(headerElement) {
            const content = headerElement.nextElementSibling;
            const section = headerElement.parentElement;
            
            headerElement.classList.toggle('expanded');
            section.classList.toggle('active');
            
            if (content.classList.toggle('expanded')) {
                content.style.maxHeight = content.scrollHeight + 'px';
                content.classList.add('slide-in');
            } else {
                content.style.maxHeight = '0';
                content.classList.remove('slide-in');
            }
        }

        // üîÑ Expandir/contraer todas las secciones
        function expandAllSections() {
            document.querySelectorAll('.section-header:not(.expanded)').forEach(header => {
                toggleSection(header);
            });
        }

        function collapseAllSections() {
            document.querySelectorAll('.section-header.expanded').forEach(header => {
                toggleSection(header);
            });
        }
        
        // üö´ Manejo de "Sin quejas"
        function handleNoComplaints() {
            const noComplaintsCheckbox = document.getElementById('sin-quejas-neuro');
            const otherCheckboxes = document.querySelectorAll('#anamnesis input[type="checkbox"]:not(#sin-quejas-neuro)');
            
            otherCheckboxes.forEach(checkbox => {
                checkbox.disabled = noComplaintsCheckbox.checked;
                if (noComplaintsCheckbox.checked) checkbox.checked = false;
            });
            
            // Ocultar secciones de caracterizaci√≥n si "sin quejas" est√° marcado
            const headacheSection = document.getElementById('headache-section');
            const seizureSection = document.getElementById('seizure-section');
            const consciousnessSection = document.getElementById('consciousness-section');

            if (noComplaintsCheckbox.checked) {
                headacheSection.classList.add('hidden');
                seizureSection.classList.add('hidden');
                consciousnessSection.classList.add('hidden');
                // Limpiar campos al ocultar
                clearSectionFields(headacheSection);
                clearSectionFields(seizureSection);
                clearSectionFields(consciousnessSection);
            } else {
                // Re-mostrar si los checkboxes espec√≠ficos est√°n marcados
                if (document.getElementById('cefalea').checked) headacheSection.classList.remove('hidden');
                if (document.getElementById('convulsiones').checked) seizureSection.classList.remove('hidden');
                if (document.getElementById('perdida-conciencia').checked) consciousnessSection.classList.remove('hidden');
            }
            updateDashboard();
            generateConclusion();
        }

        // Funci√≥n auxiliar para limpiar campos de una secci√≥n
        function clearSectionFields(sectionElement) {
            if (!sectionElement) return;
            sectionElement.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            sectionElement.querySelectorAll('input[type="radio"]').forEach(rb => rb.checked = false);
            sectionElement.querySelectorAll('input[type="number"]').forEach(nb => nb.value = '');
            sectionElement.querySelectorAll('input[type="range"]').forEach(rg => rg.value = 0);
            sectionElement.querySelectorAll('select').forEach(sel => sel.selectedIndex = 0);
            sectionElement.querySelectorAll('textarea').forEach(ta => ta.value = '');

            // Resetear displays de valores si existen
            if (sectionElement.id === 'headache-section') {
                document.getElementById('cefalea-value').textContent = '0';
            }
        }

        // L√≥gica para mostrar/ocultar secciones de caracterizaci√≥n de quejas
        function handleHeadacheComplaint(checkbox) {
            const headacheSection = document.getElementById('headache-section');
            if (checkbox.checked) {
                headacheSection.classList.remove('hidden');
            } else {
                headacheSection.classList.add('hidden');
                clearSectionFields(headacheSection);
            }
            updateDashboard();
            generateConclusion();
        }

        function handleSeizureComplaint(checkbox) {
            const seizureSection = document.getElementById('seizure-section');
            if (checkbox.checked) {
                seizureSection.classList.remove('hidden');
            } else {
                seizureSection.classList.add('hidden');
                clearSectionFields(seizureSection);
            }
            updateDashboard();
            generateConclusion();
        }

        function handleConsciousnessComplaint(checkbox) {
            const consciousnessSection = document.getElementById('consciousness-section');
            if (checkbox.checked) {
                consciousnessSection.classList.remove('hidden');
            } else {
                consciousnessSection.classList.add('hidden');
                clearSectionFields(consciousnessSection);
            }
            updateDashboard();
            generateConclusion();
        }
        
        // ‚öñÔ∏è Manejo de checkboxes mutuamente excluyentes
        function handleMutuallyExclusive(positiveId, negativeId, checkbox) {
            if (checkbox.checked) {
                const oppositeId = checkbox.id === positiveId ? negativeId : positiveId;
                const oppositeCheckbox = document.getElementById(oppositeId);
                if (oppositeCheckbox) oppositeCheckbox.checked = false;
            }
            updateDashboard();
            generateConclusion();
        }

        // üìä Actualizar valor de cefalea
        function updateCefaleaValue(value) {
            document.getElementById('cefalea-value').textContent = value;
            updateDashboard();
            generateConclusion();
        }

        // C√°lculos de escalas
        function calculateMotorScore() {
            const muscles = [
                'deltoides', 'biceps', 'triceps', 'flexores-muneca', 'extensores-muneca', 'interoseos',
                'iliopsoas', 'cuadriceps', 'isquiotibiales', 'tibial-anterior', 'gastrocnemio'
            ];
            const sides = ['der', 'izq'];
            
            let total = 0;
            let count = 0;
            
            muscles.forEach(muscle => {
                sides.forEach(side => {
                    const element = document.getElementById(`${muscle}-${side}`);
                    if (element && element.value !== '') {
                        total += parseInt(element.value);
                        count++;
                    }
                });
            });
            
            if (count > 0) {
                const average = total / count;
                document.getElementById('average-strength').textContent = average.toFixed(1);
            } else {
                document.getElementById('average-strength').textContent = '--';
            }
            updateDashboard();
            generateConclusion();
        }

        function calculateGlasgow() {
            let total = 0;
            
            const ocular = document.querySelector('input[name="glasgow-ocular"]:checked');
            if (ocular) total += parseInt(ocular.value);
            
            const verbal = document.querySelector('input[name="glasgow-verbal"]:checked');
            if (verbal) total += parseInt(verbal.value);
            
            const motor = document.querySelector('input[name="glasgow-motor"]:checked');
            if (motor) total += parseInt(motor.value);
            
            document.getElementById('glasgow-score').textContent = total;
            
            let severity = '';
            let status = '--';
            let isAbnormal = false;

            if (total >= 14) {
                severity = 'Normal';
                status = 'Normal';
            } else if (total >= 12) {
                severity = 'Leve';
                status = 'Leve';
                isAbnormal = true;
            } else if (total >= 8) {
                severity = 'Moderado';
                status = 'Mod.';
                isAbnormal = true;
            } else if (total > 0) {
                severity = 'Severo';
                status = 'Sev.';
                isAbnormal = true;
            } else {
                severity = '--';
                status = '--';
            }
            
            document.getElementById('glasgow-severity').textContent = severity;
            gcsStatus = status; // Actualizar variable global
            document.getElementById('gcs-status').textContent = status;
            document.getElementById('gcs-status').parentElement.className = `dashboard-item ${isAbnormal ? 'dashboard-alert' : 'dashboard-normal'}`;

            updateDashboard();
            generateConclusion();
        }

        function calculateNIHSS() {
            let total = 0;
            
            const components = [
                'conciencia', 'orientacion', 'ordenes', 'mirada', 'campos', 'facial',
                'brazo-izq', 'brazo-der', 'pierna-izq', 'pierna-der', 'ataxia',
                'sensibilidad', 'lenguaje', 'disartria', 'extincion'
            ];
            
            components.forEach(component => {
                const selected = document.querySelector(`input[name="nihss-${component}"]:checked`);
                if (selected) total += parseInt(selected.value);
            });
            
            document.getElementById('nihss-score').textContent = total;
            
            let severity = '';
            let status = '--';
            let isAbnormal = false;

            if (total === 0) {
                severity = 'Sin d√©ficit';
                status = 'Normal';
            } else if (total <= 4) {
                severity = 'ACV menor';
                status = 'Menor';
                isAbnormal = true;
            } else if (total <= 15) {
                severity = 'ACV moderado';
                status = 'Mod.';
                isAbnormal = true;
            } else if (total <= 20) {
                severity = 'ACV moderado-severo';
                status = 'Mod-Sev.';
                isAbnormal = true;
            } else {
                severity = 'ACV severo';
                status = 'Sev.';
                isAbnormal = true;
            }
            
            document.getElementById('nihss-severity').textContent = severity;
            nihssStatus = status; // Actualizar variable global
            document.getElementById('nihss-status').textContent = status;
            document.getElementById('nihss-status').parentElement.className = `dashboard-item ${isAbormal ? 'dashboard-alert' : 'dashboard-normal'}`;

            updateDashboard();
            generateConclusion();
        }

        function calculateMMSE() {
            const components = [
                'temporal', 'espacial', 'registro', 'atencion', 'recuerdo',
                'denominacion', 'repeticion', 'comprension', 'lectura', 'escritura', 'copia'
            ];
            
            let total = 0;
            let evaluatedCount = 0; // Para saber si se ha introducido alg√∫n valor
            components.forEach(component => {
                const element = document.getElementById(`mmse-${component}`);
                if (element && element.value !== '') {
                    total += parseInt(element.value);
                    evaluatedCount++;
                }
            });
            
            document.getElementById('mmse-score').textContent = total;
            
            let interpretation = '';
            let status = '--';
            let isAbnormal = false;

            if (evaluatedCount === 0) { // Si no se ha introducido ning√∫n valor
                 interpretation = '--';
                 status = '--';
            } else if (total >= 24) {
                interpretation = 'Normal';
                status = 'Normal';
            } else if (total >= 18) {
                interpretation = 'Deterioro cognitivo leve';
                status = 'Leve';
                isAbnormal = true;
            } else if (total >= 10) {
                interpretation = 'Deterioro cognitivo moderado';
                status = 'Mod.';
                isAbnormal = true;
            } else {
                interpretation = 'Deterioro cognitivo severo';
                status = 'Sev.';
                isAbnormal = true;
            }
            
            document.getElementById('mmse-interpretation').textContent = interpretation;
            mmseStatus = status; // Actualizar variable global
            document.getElementById('mmse-status').textContent = status;
            document.getElementById('mmse-status').parentElement.className = `dashboard-item ${isAbnormal ? 'dashboard-warning' : 'dashboard-normal'}`;


            updateDashboard();
            generateConclusion();
        }

        function calculateUPDRS() {
            const components = ['expresion', 'temblor', 'rigidez', 'bradicinesia', 'inestabilidad', 'marcha'];
            
            let total = 0;
            let evaluatedCount = 0;
            components.forEach(component => {
                const element = document.getElementById(`updrs-${component}`);
                if (element && element.value !== '') {
                    total += parseInt(element.value);
                    evaluatedCount++;
                }
            });
            
            document.getElementById('updrs-score').textContent = total;
            
            let severity = '';
            if (evaluatedCount === 0) {
                severity = '--';
            } else if (total === 0) {
                severity = 'Sin signos';
            } else if (total <= 6) {
                severity = 'Leve';
            } else if (total <= 12) {
                severity = 'Moderado';
            } else {
                severity = 'Severo';
            }
            
            document.getElementById('updrs-severity').textContent = severity;
            updateDashboard();
            generateConclusion();
        }

       // üìä ACTUALIZAR DASHBOARD GENERAL
        function updateDashboard() {
            const sections = [
                'anamnesis-section', 'general-neuro-exam-section', 'motor-reflexes-section', 
                'sensory-coordination-section', 'neurological-scales-section', 'special-neuro-tests-section'
            ];
            
            let currentCompletedSections = 0;
            let currentTotalFindings = 0;
            let currentTotalAlerts = 0;
            let currentTotalWarnings = 0;
            
            sections.forEach(sectionId => {
                const sectionElement = document.getElementById(sectionId);
                if (sectionElement) {
                    // Contar checkboxes, radios, inputs num√©ricos y de texto que tienen valor
                    const inputsWithValues = sectionElement.querySelectorAll('input[type="checkbox"]:checked, input[type="radio"]:checked, input[type="number"]:not([value=""]):not([value="0"]), input[type="text"]:not([value=""]), select:not([value=""])');
                    
                    let hasContent = inputsWithValues.length > 0;
                    
                    // Condici√≥n especial para Anamnesis: si "sin quejas" est√° marcado
                    if (sectionId === 'anamnesis-section' && document.getElementById('sin-quejas-neuro')?.checked) {
                        hasContent = true;
                    }
                    
                    if (hasContent) {
                        currentCompletedSections++;
                        currentTotalFindings += inputsWithValues.length;
                        
                        const badge = document.getElementById(`badge-${sectionId.replace('-section', '')}`);
                        const navItem = document.getElementById(`nav-${sectionId.replace('-section', '')}`);
                        
                        if (badge) {
                            badge.classList.add('completed');
                            badge.innerHTML = '<i class="fas fa-check"></i>';
                        }
                        if (navItem) {
                            navItem.style.opacity = '1';
                            navItem.parentElement.classList.add('completed');
                        }

                        // Contar alertas y warnings espec√≠ficos
                        inputsWithValues.forEach(input => {
                            const id = input.id;
                            const value = input.value;
                            const name = input.name;
                            const label = document.querySelector(`label[for="${id}"]`)?.textContent.toLowerCase() || '';

                            // Alertas (ej. valores cr√≠ticos, signos patol√≥gicos positivos)
                            if (id.includes('coma') || id.includes('estupor') || 
                                id.includes('perdida-conciencia') || id.includes('paralysis') ||
                                id.includes('babinski') || id.includes('hoffmann') || id.includes('clonus') ||
                                id.includes('rigidez-nuca-pos') || id.includes('kernig-pos') || id.includes('brudzinski-pos') ||
                                (id === 'glasgow-score' && parseFloat(value) <= 8 && parseFloat(value) > 0) || // GCS severo
                                (id === 'nihss-score' && parseFloat(value) >= 15) // NIHSS moderado-severo o severo
                            ) {
                                currentTotalAlerts++;
                            }
                            // Warnings (ej. valores anormales, debilidad, d√©ficits leves a moderados)
                            else if (id.includes('alterado') || id.includes('limitacion') || 
                                     id.includes('ataxia') || id.includes('disartria') || id.includes('afasia') ||
                                     id.includes('desorientacion') || id.includes('confusion') ||
                                     (id === 'cefalea-intensidad' && parseFloat(value) >= 5) || // Cefalea moderada a severa
                                     (id === 'glasgow-score' && parseFloat(value) > 8 && parseFloat(value) <= 13) || // GCS moderado a leve
                                     (id === 'nihss-score' && parseFloat(value) > 0 && parseFloat(value) < 15) || // NIHSS menor a moderado
                                     (id === 'mmse-score' && parseFloat(value) < 24 && parseFloat(value) > 0) || // MMSE deterioro
                                     (id.includes('strength-select') && parseFloat(value) < 5) // Fuerza no normal
                            ) {
                                currentTotalWarnings++;
                            }
                        });

                        // Ajustar por estado de GCS, NIHSS, MMSE del dashboard
                        if (gcsStatus === 'Sev.') currentTotalAlerts++;
                        else if (gcsStatus === 'Mod.' || gcsStatus === 'Leve') currentTotalWarnings++;

                        if (nihssStatus === 'Sev.' || nihssStatus === 'Mod-Sev.') currentTotalAlerts++;
                        else if (nihssStatus === 'Mod.' || nihssStatus === 'Menor') currentTotalWarnings++;
                        
                        if (mmseStatus === 'Sev.') currentTotalAlerts++;
                        else if (mmseStatus === 'Mod.' || mmseStatus === 'Leve') currentTotalWarnings++;

                    } else {
                        const badge = document.getElementById(`badge-${sectionId.replace('-section', '')}`);
                        const navItem = document.getElementById(`nav-${sectionId.replace('-section', '')}`);
                        
                        if (badge) {
                            badge.classList.remove('completed');
                            badge.innerHTML = '<i class="fas fa-circle"></i>';
                        }
                        if (navItem) {
                            navItem.style.opacity = '0';
                            navItem.parentElement.classList.remove('completed');
                        }
                    }
                }
            });
            
            examProgress = Math.round((currentCompletedSections / sections.length) * 100);
            document.getElementById('exam-progress').textContent = `${examProgress}%`;
            document.getElementById('sections-completed').textContent = `${currentCompletedSections}/${sections.length}`;
            document.getElementById('alert-count').textContent = currentTotalAlerts;
            document.getElementById('warning-count').textContent = currentTotalWarnings;
            document.getElementById('findings-count').textContent = currentTotalFindings;
            
            // Actualizar clases del dashboard seg√∫n alertas y warnings
            document.getElementById('alerts-item').className = `dashboard-item ${currentTotalAlerts > 0 ? 'dashboard-alert' : ''}`;
            document.getElementById('warnings-item').className = `dashboard-item ${currentTotalWarnings > 0 ? 'dashboard-warning' : ''}`;
            document.getElementById('findings-item').className = `dashboard-item ${currentTotalFindings > 0 ? 'dashboard-normal' : ''}`;

            alertCount = currentTotalAlerts; // Guardar para la conclusi√≥n
            warningCount = currentTotalWarnings;
            findingsCount = currentTotalFindings;
        }

        // üìù GENERAR CONCLUSI√ìN MEJORADA (Estilo narrativo y completo)
        function generateConclusion() {
            const conclusionEl = document.getElementById('conclusion-text');
            let conclusion = 'INFORME DEL EXAMEN NEUROL√ìGICO:\n\n';

            // Funciones auxiliares para simplificar el c√≥digo y la legibilidad
            const getLabelText = (id) => document.querySelector(`label[for="${id}"]`)?.textContent.toLowerCase() || '';
            const isChecked = (id) => document.getElementById(id)?.checked;
            const getInputValue = (id) => document.getElementById(id)?.value;
            const getSelectedValue = (id) => document.getElementById(id)?.value;
            const getSelectedText = (id) => {
                const select = document.getElementById(id);
                return select && select.selectedIndex > -1 ? select.options[select.selectedIndex].textContent.toLowerCase() : '';
            };
            const capitalizeFirstLetter = (string) => string.charAt(0).toUpperCase() + string.slice(1);
            const getRadioButtonValue = (name) => {
                const radio = document.querySelector(`input[name="${name}"]:checked`);
                return radio ? getLabelText(radio.id) : '';
            };
            // Funci√≥n para formatear listas de hallazgos
            const formatList = (arr) => {
                if (arr.length === 0) return '';
                if (arr.length === 1) return arr[0];
                const last = arr.pop();
                return arr.join(', ') + ' y ' + last;
            };

            // --- 1. ANAMNESIS Y QUEJAS PRINCIPALES ---
            let anamnesisSectionAdded = false; // Bandera para saber si se ha a√±adido algo a esta secci√≥n
            let anamnesisText = '';

            const quejasPrincipalesReport = [];
            const sinQuejasMarcado = isChecked('sin-quejas-neuro');

            if (sinQuejasMarcado) {
                quejasPrincipalesReport.push('el paciente no refiere quejas neurol√≥gicas');
            } else {
                ['cefalea', 'mareos-vertigo', 'convulsiones', 'perdida-conciencia', 'debilidad-muscular',
                 'alteraciones-sensitivas', 'trastornos-lenguaje', 'alteraciones-memoria', 'trastornos-marcha',
                 'temblor', 'movimientos-anormales', 'alteraciones-vision', 'alteraciones-audicion',
                 'disfagia', 'incontinencia-neurologica', 'alteraciones-sueno', 'nauseas-vomitos-neuro',
                 'alteraciones-comportamiento', 'dolor-neuropatico'].forEach(id => {
                    if (isChecked(id)) {
                        quejasPrincipalesReport.push(getLabelText(id));
                    }
                });
            }
            
            // Si hay quejas o se marc√≥ 'sin quejas', a√±adimos la secci√≥n principal de anamnesis
            if (quejasPrincipalesReport.length > 0 || sinQuejasMarcado) {
                anamnesisSectionAdded = true;
                if (sinQuejasMarcado) {
                    anamnesisText += `Motivo de consulta: Consulta de rutina neurol√≥gica, ${formatList(quejasPrincipalesReport)}. `;
                } else {
                    anamnesisText += `Motivo de consulta: Paciente consulta por ${formatList(quejasPrincipalesReport)}. `;

                    // Caracterizaci√≥n de Cefalea
                    const cefaleaIntensidad = getInputValue('cefalea-intensidad');
                    const localizacionCefalea = getRadioButtonValue('localizacion-cefalea');
                    const tipoCefalea = getRadioButtonValue('tipo-cefalea');
                    const duracionCefalea = getInputValue('duracion-cefalea');
                    const frecuenciaCefalea = getInputValue('frecuencia-cefalea');
                    
                    const cefaleaSymptoms = [];
                    ['fotofobia-cefalea', 'fonofobia', 'osmofobia', 'nauseas-cefalea', 'vomitos-cefalea', 'aura-visual', 'aura-sensitiva'].forEach(id => {
                        if (isChecked(id)) cefaleaSymptoms.push(getLabelText(id));
                    });

                    const hasCefaleaDetails = (cefaleaIntensidad && cefaleaIntensidad !== '0') || localizacionCefalea || tipoCefalea || (duracionCefalea && duracionCefalea !== '0') || (frecuenciaCefalea && frecuenciaCefalea !== '0') || cefaleaSymptoms.length > 0;
                    
                    if (document.getElementById('cefalea').checked && hasCefaleaDetails) { // Solo si cefalea est√° marcado y hay detalles
                        anamnesisText += `Caracterizaci√≥n de cefalea: `;
                        if (cefaleaIntensidad && cefaleaIntensidad !== '0') anamnesisText += `Intensidad: ${cefaleaIntensidad}/10. `; else if (document.getElementById('cefalea-intensidad')) anamnesisText += `Intensidad: No especificada. `;
                        if (localizacionCefalea) anamnesisText += `Localizaci√≥n: ${localizacionCefalea}. `; else if (document.querySelector('input[name="localizacion-cefalea"]')) anamnesisText += `Localizaci√≥n: No especificada. `;
                        if (tipoCefalea) anamnesisText += `Tipo: ${tipoCefalea}. `; else if (document.querySelector('input[name="tipo-cefalea"]')) anamnesisText += `Tipo: No especificado. `;
                        if (duracionCefalea && duracionCefalea !== '0') anamnesisText += `Duraci√≥n de episodios: ${duracionCefalea} horas. `; else if (document.getElementById('duracion-cefalea')) anamnesisText += `Duraci√≥n: No especificada. `;
                        if (frecuenciaCefalea && frecuenciaCefalea !== '0') anamnesisText += `Frecuencia mensual: ${frecuenciaCefalea} d√≠as/mes. `; else if (document.getElementById('frecuencia-cefalea')) anamnesisText += `Frecuencia: No especificada. `;
                        if (cefaleaSymptoms.length > 0) anamnesisText += `S√≠ntomas asociados: ${formatList(cefaleaSymptoms)}. `; else if (document.querySelectorAll('.headache-assessment .checkbox-grid input[type="checkbox"]').length > 0) anamnesisText += `S√≠ntomas asociados: Ausentes. `;
                    } else if (document.getElementById('cefalea').checked) { // Si cefalea est√° marcado pero sin detalles
                        anamnesisText += `Caracterizaci√≥n de cefalea: Queja registrada, pero detalles no especificados. `;
                    }


                    // Caracterizaci√≥n de Convulsiones
                    const tipoConvulsion = getRadioButtonValue('tipo-convulsion');
                    const duracionConvulsion = getInputValue('duracion-convulsion');
                    const frecuenciaConvulsion = getInputValue('frecuencia-convulsion');
                    
                    const seizureCharacteristics = [];
                    ['perdida-conciencia-convulsion', 'mordedura-lengua', 'incontinencia-convulsion', 'confusion-postictal', 'aura-preictal', 'automatismos'].forEach(id => {
                        if (isChecked(id)) seizureCharacteristics.push(getLabelText(id));
                    });

                    const hasSeizureDetails = tipoConvulsion || (duracionConvulsion && duracionConvulsion !== '0') || (frecuenciaConvulsion && frecuenciaConvulsion !== '0') || seizureCharacteristics.length > 0;

                    if (document.getElementById('convulsiones').checked && hasSeizureDetails) { // Solo si convulsiones est√° marcado y hay detalles
                        anamnesisText += `Caracterizaci√≥n de convulsiones: `;
                        if (tipoConvulsion) anamnesisText += `Tipo: ${tipoConvulsion}. `; else if (document.querySelector('input[name="tipo-convulsion"]')) anamnesisText += `Tipo: No especificado. `;
                        if (duracionConvulsion && duracionConvulsion !== '0') anamnesisText += `Duraci√≥n de crisis: ${duracionConvulsion} minutos. `; else if (document.getElementById('duracion-convulsion')) anamnesisText += `Duraci√≥n: No especificada. `;
                        if (frecuenciaConvulsion && frecuenciaConvulsion !== '0') anamnesisText += `Frecuencia: ${frecuenciaConvulsion} crisis/mes. `; else if (document.getElementById('frecuencia-convulsion')) anamnesisText += `Frecuencia: No especificada. `;
                        if (seizureCharacteristics.length > 0) anamnesisText += `Caracter√≠sticas: ${formatList(seizureCharacteristics)}. `; else if (document.querySelectorAll('.seizure-assessment .checkbox-grid input[type="checkbox"]').length > 0) anamnesisText += `Caracter√≠sticas: Ausentes. `;
                    } else if (document.getElementById('convulsiones').checked) { // Si convulsiones est√° marcado pero sin detalles
                        anamnesisText += `Caracterizaci√≥n de convulsiones: Queja registrada, pero detalles no especificados. `;
                    }


                    // Alteraciones de Conciencia
                    const nivelConciencia = getRadioButtonValue('nivel-conciencia');
                    const concienciaAlterations = [];
                    ['desorientacion-temporal', 'desorientacion-espacial', 'desorientacion-personal', 'confusion-mental', 'agitacion', 'apatia'].forEach(id => {
                        if (isChecked(id)) concienciaAlterations.push(getLabelText(id));
                    });

                    const hasConsciousnessDetails = nivelConciencia || concienciaAlterations.length > 0;

                    if (document.getElementById('perdida-conciencia').checked && hasConsciousnessDetails) { // Solo si p√©rdida de conciencia est√° marcado y hay detalles
                        anamnesisText += `Nivel de conciencia: `;
                        if (nivelConciencia) anamnesisText += `${nivelConciencia}. `; else if (document.querySelector('input[name="nivel-conciencia"]')) anamnesisText += `No especificado. `;
                        if (concienciaAlterations.length > 0) anamnesisText += `Alteraciones asociadas: ${formatList(concienciaAlterations)}. `; else if (document.querySelectorAll('.consciousness-assessment .checkbox-grid input[type="checkbox"]').length > 0) anamnesisText += `Alteraciones asociadas: Ausentes. `;
                    } else if (document.getElementById('perdida-conciencia').checked) { // Si p√©rdida de conciencia est√° marcado pero sin detalles
                        anamnesisText += `Alteraciones de conciencia: Queja registrada, pero detalles no especificados. `;
                    }


                    // Antecedentes Neurol√≥gicos: Historia Personal
                    const personalNeuroHistory = [];
                    ['traumatismo-craneal', 'accidente-cerebrovascular', 'epilepsia', 'migranas',
                     'enfermedad-parkinson', 'esclerosis-multiple', 'demencia', 'neuropatia-periferica',
                     'meningitis', 'tumor-cerebral', 'cirugia-neurologica'].forEach(id => {
                        if (isChecked(id)) personalNeuroHistory.push(getLabelText(id));
                    });
                    if (personalNeuroHistory.length > 0) {
                        anamnesisText += `Antecedentes personales neurol√≥gicos: ${formatList(personalNeuroHistory)}. `;
                    } else if (document.querySelectorAll('#anamnesis .exam-container:nth-of-type(4) .exam-section:nth-of-type(1) input[type="checkbox"]').length > 0) {
                        anamnesisText += `Antecedentes personales neurol√≥gicos: No refiere. `;
                    }

                    // Antecedentes Neurol√≥gicos: Historia Familiar
                    const familiarNeuroHistory = [];
                    ['familia-epilepsia', 'familia-migranas', 'familia-demencia',
                     'familia-parkinson', 'familia-esclerosis', 'familia-huntington', 'familia-acv'].forEach(id => {
                        if (isChecked(id)) familiarNeuroHistory.push(getLabelText(id));
                    });
                    if (familiarNeuroHistory.length > 0) {
                        anamnesisText += `Antecedentes familiares neurol√≥gicos: ${formatList(familiarNeuroHistory)}. `;
                    } else if (document.querySelectorAll('#anamnesis .exam-container:nth-of-type(4) .exam-section:nth-of-type(2) input[type="checkbox"]').length > 0) {
                        anamnesisText += `Antecedentes familiares neurol√≥gicos: No refiere. `;
                    }

                    // Antecedentes Neurol√≥gicos: Factores de Riesgo
                    const neuroRiskFactors = [];
                    ['hipertension-neuro', 'diabetes-neuro', 'dislipidemia-neuro', 'tabaquismo-neuro',
                     'alcoholismo', 'drogas-ilicitas', 'cardiopatia', 'anticoagulantes'].forEach(id => {
                        if (isChecked(id)) neuroRiskFactors.push(getLabelText(id));
                    });
                    if (neuroRiskFactors.length > 0) {
                        anamnesisText += `Factores de riesgo neurol√≥gicos: ${formatList(neuroRiskFactors)}. `;
                    } else if (document.querySelectorAll('#anamnesis .exam-container:nth-of-type(4) .exam-section:nth-of-type(3) input[type="checkbox"]').length > 0) {
                        anamnesisText += `Factores de riesgo neurol√≥gicos: No refiere. `;
                    }
                }
            }
            
            if (anamnesisSectionAdded) {
                conclusion += `ANAMNESIS Y QUEJAS PRINCIPALES:\n${anamnesisText.trim()}\n\n`;
            }

            // --- 2. EXAMEN NEUROL√ìGICO GENERAL ---
            let generalNeuroExamSectionAdded = false;
            let generalNeuroExamText = '';

            // Estado Mental y Funciones Superiores
            const orientacionAtencion = [];
            ['orientado-tiempo', 'orientado-espacio', 'orientado-persona', 'atencion-normal',
             'concentracion-normal', 'memoria-inmediata', 'memoria-reciente', 'memoria-remota'].forEach(id => {
                if (isChecked(id)) orientacionAtencion.push(getLabelText(id));
            });
            if (orientacionAtencion.length > 0) {
                generalNeuroExamSectionAdded = true;
                generalNeuroExamText += `Orientaci√≥n y atenci√≥n: ${formatList(orientacionAtencion)}. `;
            } else if (document.querySelectorAll('#general-neuro-exam .cognitive-assessment:nth-of-type(1) input[type="checkbox"]').length > 0) {
                 generalNeuroExamSectionAdded = true;
                 generalNeuroExamText += `Orientaci√≥n y atenci√≥n: No evaluadas o sin alteraciones. `;
            }

            const lenguajeComunicacion = [];
            ['lenguaje-normal', 'afasia-expresiva', 'afasia-receptiva', 'afasia-mixta',
             'disartria', 'disfonia', 'comprension-normal', 'repeticion-normal', 'denominacion-normal'].forEach(id => {
                if (isChecked(id)) lenguajeComunicacion.push(getLabelText(id));
            });
            if (lenguajeComunicacion.length > 0) {
                generalNeuroExamSectionAdded = true;
                generalNeuroExamText += `Lenguaje y comunicaci√≥n: ${formatList(lenguajeComunicacion)}. `;
            } else if (document.querySelectorAll('#general-neuro-exam .cognitive-assessment:nth-of-type(2) input[type="checkbox"]').length > 0) {
                 generalNeuroExamSectionAdded = true;
                 generalNeuroExamText += `Lenguaje y comunicaci√≥n: No evaluadas o sin alteraciones. `;
            }

            const funcionesEjecutivas = [];
            ['juicio-normal', 'insight-conservado', 'calculo-normal', 'abstraccion-normal',
             'pensamiento-organizado', 'planificacion-normal'].forEach(id => {
                if (isChecked(id)) funcionesEjecutivas.push(getLabelText(id));
            });
            if (funcionesEjecutivas.length > 0) {
                generalNeuroExamSectionAdded = true;
                generalNeuroExamText += `Funciones ejecutivas: ${formatList(funcionesEjecutivas)}. `;
            } else if (document.querySelectorAll('#general-neuro-exam .cognitive-assessment:nth-of-type(3) input[type="checkbox"]').length > 0) {
                 generalNeuroExamSectionAdded = true;
                 generalNeuroExamText += `Funciones ejecutivas: No evaluadas o sin alteraciones. `;
            }


            // Pares Craneales
            const paresCranealesReport = [];
            const cranialNerves = ['olfatorio', 'optico', 'oculomotor', 'troclear', 'trigemino', 'abducens',
                                   'facial', 'vestibulococlear', 'glosofaringeo', 'vago', 'accesorio', 'hipogloso'];

            cranialNerves.forEach(cn => {
                const normalChecked = isChecked(`${cn}-normal`);
                const alteradoChecked = isChecked(`${cn}-alterado`);
                let status = '';

                if (normalChecked) status = 'Normal';
                else if (alteradoChecked) status = 'Alterado';

                if (status) {
                    generalNeuroExamSectionAdded = true;
                    paresCranealesReport.push(`${capitalizeFirstLetter(cn)}: ${status}`);
                } else if (document.getElementById(`${cn}-normal`)) { // Si existe el checkbox de normalidad
                    generalNeuroExamSectionAdded = true;
                    paresCranealesReport.push(`${capitalizeFirstLetter(cn)}: No evaluado`);
                }
            });
            if (paresCranealesReport.length > 0) {
                generalNeuroExamText += `Pares craneales: ${paresCranealesReport.join('; ')}. `;
            } else if (document.querySelectorAll('.cranial-nerves .test-item').length > 0) {
                 generalNeuroExamSectionAdded = true;
                 generalNeuroExamText += `Pares craneales: No evaluados o sin alteraciones. `;
            }


            // Evaluaci√≥n de la Marcha
            const marchaReport = [];
            ['marcha-hemiparesica', 'marcha-paraparesica', 'marcha-ataxica',
             'marcha-parkinsoniana', 'marcha-festinante', 'marcha-steppage',
             'marcha-trendelenburg', 'marcha-antalgica', 'imposibilidad-marcha'].forEach(id => {
                if (isChecked(id)) marchaReport.push(getLabelText(id));
            });

            const marchaNormal = isChecked('marcha-normal');
            const rombergPos = isChecked('romberg-positivo');
            const rombergNeg = isChecked('romberg-negativo');
            const tandemNormal = isChecked('tandem-normal');
            const tandemAlterado = isChecked('tandem-alterado');

            const hasGaitDetails = marchaReport.length > 0 || marchaNormal || rombergPos || rombergNeg || tandemNormal || tandemAlterado;

            if (hasGaitDetails) {
                generalNeuroExamSectionAdded = true;
                generalNeuroExamText += `Marcha: `;
                if (marchaNormal && marchaReport.length === 0) generalNeuroExamText += `Caracter√≠sticas: Normal. `;
                else if (marchaReport.length > 0) generalNeuroExamText += `Caracter√≠sticas: ${formatList(marchaReport)}. `;
                else if(document.querySelectorAll('.gait-assessment .checkbox-grid input').length > 0) generalNeuroExamText += `Caracter√≠sticas: No especificadas. `;

                if (rombergPos) generalNeuroExamText += `Prueba de Romberg: Positivo. `;
                else if (rombergNeg) generalNeuroExamText += `Prueba de Romberg: Negativo. `;
                else if (document.getElementById('romberg-positivo')) generalNeuroExamText += `Prueba de Romberg: No evaluada. `;
                
                if (tandemNormal) generalNeuroExamText += `Marcha en t√°ndem: Normal. `;
                else if (tandemAlterado) generalNeuroExamText += `Marcha en t√°ndem: Alterada. `;
                else if (document.getElementById('tandem-normal')) generalNeuroExamText += `Marcha en t√°ndem: No evaluada. `;
            } else if (document.querySelectorAll('.gait-assessment input').length > 0) {
                 generalNeuroExamSectionAdded = true;
                 generalNeuroExamText += `Marcha: No evaluada o sin alteraciones. `;
            }


            if (generalNeuroExamSectionAdded) {
                conclusion += `EXAMEN NEUROL√ìGICO GENERAL:\n${generalNeuroExamText.trim()}\n\n`;
            }

            // --- 3. SISTEMA MOTOR Y REFLEJOS ---
            let motorReflexesSectionAdded = false;
            let motorReflexesText = '';

            // Evaluaci√≥n de Fuerza Muscular
            const muscles = ['deltoides', 'biceps', 'triceps', 'flexores-muneca', 'extensores-muneca', 'interoseos',
                            'iliopsoas', 'cuadriceps', 'isquiotibiales', 'tibial-anterior', 'gastrocnemio'];
            const sides = ['der', 'izq'];
            let strengthEvaluated = false;
            const strengthFindings = [];

            muscles.forEach(muscle => {
                sides.forEach(side => {
                    const selectId = `${muscle}-${side}`;
                    const element = document.getElementById(selectId);
                    if (element) { // Asegurarse de que el elemento exista
                        if (element.value && element.value !== '') {
                            strengthEvaluated = true;
                            strengthFindings.push(`${capitalizeFirstLetter(muscle)} (${side}): ${element.value}/5`);
                        } else {
                            // Consideramos que se est√° evaluando la fuerza si hay al menos un selector
                            if (document.querySelectorAll('.strength-select').length > 0) {
                                strengthEvaluated = true; 
                                strengthFindings.push(`${capitalizeFirstLetter(muscle)} (${side}): No evaluado`);
                            }
                        }
                    }
                });
            });

            if (strengthEvaluated) {
                motorReflexesSectionAdded = true;
                motorReflexesText += `Fuerza muscular: ${strengthFindings.join('; ')}. `;
                const averageStrength = document.getElementById('average-strength').textContent;
                if (averageStrength && averageStrength !== '--') motorReflexesText += `Promedio general: ${averageStrength}/5. `;
            } else if (document.querySelectorAll('.strength-grid select').length > 0) {
                 motorReflexesSectionAdded = true;
                 motorReflexesText += `Fuerza muscular: No evaluada o sin debilidad significativa. `;
            }


            // Tono Muscular y Movimientos Anormales
            const toneAndMovementFindings = [];
            ['tono-normal', 'hipertonia', 'hipotonia', 'rigidez', 'espasticidad',
             'temblor-reposo', 'temblor-accion', 'temblor-intencion', 'corea', 'atetosis',
             'distonias', 'mioclonias', 'tics', 'fasciculaciones'].forEach(id => {
                if (isChecked(id)) toneAndMovementFindings.push(getLabelText(id));
            });
            if (toneAndMovementFindings.length > 0) {
                motorReflexesSectionAdded = true;
                motorReflexesText += `Tono muscular y movimientos anormales: ${formatList(toneAndMovementFindings)}. `;
            } else if (document.querySelectorAll('.motor-assessment .checkbox-grid input').length > 0) {
                 motorReflexesSectionAdded = true;
                 motorReflexesText += `Tono muscular y movimientos anormales: No evidentes. `;
            }


            // Reflejos Osteotendinosos
            const reflexes = ['bicipital', 'tricipital', 'braquiorradial', 'rotuliano', 'aquileo'];
            let reflexesEvaluated = false;
            const reflexFindings = [];

            reflexes.forEach(reflex => {
                sides.forEach(side => {
                    const name = `${reflex}-${side}`;
                    const checkedRadio = document.querySelector(`input[name="${name}"]:checked`);
                    if (checkedRadio) {
                        reflexesEvaluated = true;
                        reflexFindings.push(`${capitalizeFirstLetter(reflex)} (${side}): ${checkedRadio.value}+`);
                    } else if (document.querySelector(`input[name="${name}"]`)) { // Si los radios existen pero no se marc√≥
                        reflexesEvaluated = true;
                        reflexFindings.push(`${capitalizeFirstLetter(reflex)} (${side}): No evaluado`);
                    }
                });
            });

            if (reflexesEvaluated) {
                motorReflexesSectionAdded = true;
                motorReflexesText += `Reflejos osteotendinosos: ${reflexFindings.join('; ')}. `;
            } else if (document.querySelectorAll('.reflex-side input[type="radio"]').length > 0) {
                 motorReflexesSectionAdded = true;
                 motorReflexesText += `Reflejos osteotendinosos: No evaluados. `;
            }


            // Reflejos Patol√≥gicos
            const pathologicalReflexes = [];
            const pathologicalTests = ['babinski', 'hoffmann', 'clonus'];

            pathologicalTests.forEach(test => {
                sides.forEach(side => {
                    const posId = `${test}-${side}-pos`;
                    const negId = `${test}-${side}-neg`;
                    if (isChecked(posId)) {
                        motorReflexesSectionAdded = true;
                        pathologicalReflexes.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: Positivo`);
                    } else if (isChecked(negId)) {
                        motorReflexesSectionAdded = true;
                        pathologicalReflexes.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: Negativo`);
                    } else if (document.getElementById(posId)) { // Si los checkboxes existen pero no se marc√≥
                        motorReflexesSectionAdded = true;
                        pathologicalReflexes.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: No evaluado`);
                    }
                });
            });
            if (pathologicalReflexes.length > 0) {
                motorReflexesText += `Reflejos patol√≥gicos: ${pathologicalReflexes.join('; ')}. `;
            } else if (document.querySelectorAll('.reflexes-assessment .test-item input[type="checkbox"]').length > 0) {
                 motorReflexesSectionAdded = true;
                 motorReflexesText += `Reflejos patol√≥gicos: Ausentes o no evaluados. `;
            }


            if (motorReflexesSectionAdded) {
                conclusion += `SISTEMA MOTOR Y REFLEJOS:\n${motorReflexesText.trim()}\n\n`;
            }

            // --- 4. SISTEMA SENSITIVO Y COORDINACI√ìN ---
            let sensoryCoordinationSectionAdded = false;
            let sensoryCoordinationText = '';

            // Sensibilidad
            const sensTypes = ['tactil', 'dolorosa', 'termica', 'vibratoria', 'propiocepcion', 'discriminacion'];
            let sensitivityEvaluated = false;
            const sensitivityFindings = [];

            sensTypes.forEach(type => {
                sides.forEach(side => {
                    const normalId = `${type}-${side}-normal`;
                    const alteradaId = `${type}-${side}-alterada`;
                    if (isChecked(normalId)) {
                        sensitivityEvaluated = true;
                        sensitivityFindings.push(`${capitalizeFirstLetter(type)} (${side}): Normal`);
                    } else if (isChecked(alteradaId)) {
                        sensitivityEvaluated = true;
                        sensitivityFindings.push(`${capitalizeFirstLetter(type)} (${side}): Alterada`);
                    } else if (document.getElementById(normalId)) { // Si los checkboxes existen pero no se marc√≥
                        sensitivityEvaluated = true;
                        sensitivityFindings.push(`${capitalizeFirstLetter(type)} (${side}): No evaluada`);
                    }
                });
            });
            if (sensitivityEvaluated) {
                sensoryCoordinationSectionAdded = true;
                sensoryCoordinationText += `Sensibilidad: ${sensitivityFindings.join('; ')}. `;
            } else if (document.querySelectorAll('#sensory-coordination .exam-container:nth-of-type(1) input').length > 0) {
                 sensoryCoordinationSectionAdded = true;
                 sensoryCoordinationText += `Sensibilidad: No evaluada o sin alteraciones. `;
            }


            // Coordinaci√≥n y Cerebelo
            const coordinationTests = ['indice-nariz', 'diadococinesia', 'talon-rodilla', 'rebote'];
            let coordinationEvaluated = false;
            const coordinationFindings = [];

            coordinationTests.forEach(test => {
                sides.forEach(side => {
                    const normalId = `${test}-${side}-normal`;
                    const alteradoId = `${test}-${side}-alterado`;
                    if (isChecked(normalId)) {
                        coordinationEvaluated = true;
                        coordinationFindings.push(`${capitalizeFirstLetter(getLabelText(test))} (${side}): Normal`);
                    } else if (isChecked(alteradoId)) {
                        coordinationEvaluated = true;
                        coordinationFindings.push(`${capitalizeFirstLetter(getLabelText(test))} (${side}): Alterada`);
                    } else if (document.getElementById(normalId)) { // Si los checkboxes existen pero no se marc√≥
                        coordinationEvaluated = true;
                        coordinationFindings.push(`${capitalizeFirstLetter(getLabelText(test))} (${side}): No evaluada`);
                    }
                });
            });
            if (coordinationEvaluated) {
                sensoryCoordinationSectionAdded = true;
                sensoryCoordinationText += `Coordinaci√≥n y cerebelo: ${coordinationFindings.join('; ')}. `;
            } else if (document.querySelectorAll('#sensory-coordination .exam-container:nth-of-type(2) input').length > 0) {
                 sensoryCoordinationSectionAdded = true;
                 sensoryCoordinationText += `Coordinaci√≥n y cerebelo: No evaluados o sin alteraciones. `;
            }


            if (sensoryCoordinationSectionAdded) {
                conclusion += `SISTEMA SENSITIVO Y COORDINACI√ìN:\n${sensoryCoordinationText.trim()}\n\n`;
            }

            // --- 5. ESCALAS NEUROL√ìGICAS ---
            let scalesSectionAdded = false;
            let scalesText = '';

            // Escala de Coma de Glasgow (GCS)
            const glasgowScore = document.getElementById('glasgow-score')?.textContent;
            const glasgowSeverity = document.getElementById('glasgow-severity')?.textContent;
            const ocularChecked = document.querySelector('input[name="glasgow-ocular"]:checked');
            const verbalChecked = document.querySelector('input[name="glasgow-verbal"]:checked');
            const motorChecked = document.querySelector('input[name="glasgow-motor"]:checked');

            const hasGlasgowDetails = (glasgowScore && glasgowScore !== '0') || ocularChecked || verbalChecked || motorChecked;

            if (hasGlasgowDetails) {
                scalesSectionAdded = true;
                scalesText += `Escala de Coma de Glasgow (GCS): ${glasgowScore}/15 puntos (${glasgowSeverity}). `;
                if (ocularChecked) scalesText += `Apertura ocular: ${getSelectedText(ocularChecked.id)}. `; else if (document.querySelector('input[name="glasgow-ocular"]')) scalesText += `Apertura ocular: No evaluada. `;
                if (verbalChecked) scalesText += `Respuesta verbal: ${getSelectedText(verbalChecked.id)}. `; else if (document.querySelector('input[name="glasgow-verbal"]')) scalesText += `Respuesta verbal: No evaluada. `;
                if (motorChecked) scalesText += `Respuesta motora: ${getSelectedText(motorChecked.id)}. `; else if (document.querySelector('input[name="glasgow-motor"]')) scalesText += `Respuesta motora: No evaluada. `;
            } else if (document.querySelectorAll('#neurological-scales .exam-container:nth-of-type(1) input').length > 0) {
                 scalesSectionAdded = true;
                 scalesText += `Escala de Coma de Glasgow: No evaluada o sin alteraciones. `;
            }


            // NIHSS - National Institutes of Health Stroke Scale
            const nihssScore = document.getElementById('nihss-score')?.textContent;
            const nihssSeverity = document.getElementById('nihss-severity')?.textContent;
            const nihssComponentsFilled = document.querySelectorAll('input[name^="nihss-"]:checked').length > 0;

            if (nihssScore !== '0' || nihssComponentsFilled) {
                scalesSectionAdded = true;
                scalesText += `NIHSS (National Institutes of Health Stroke Scale): ${nihssScore}/42 puntos (${nihssSeverity}). `;
            } else if (document.querySelectorAll('#neurological-scales .exam-container:nth-of-type(2) input').length > 0) {
                 scalesSectionAdded = true;
                 scalesText += `NIHSS: No evaluado o sin hallazgos significativos. `;
            }


            // Mini-Mental State Examination (MMSE)
            const mmseScore = document.getElementById('mmse-score')?.textContent;
            const mmseInterpretation = document.getElementById('mmse-interpretation')?.textContent;
            const mmseComponentsFilled = document.querySelectorAll('[id^="mmse-"]').length > 0 && Array.from(document.querySelectorAll('[id^="mmse-"]')).some(input => input.value !== '');

            if (mmseScore !== '0' || mmseComponentsFilled) {
                scalesSectionAdded = true;
                scalesText += `Mini-Mental State Examination (MMSE): ${mmseScore}/30 puntos (${mmseInterpretation}). `;
            } else if (document.querySelectorAll('#neurological-scales .exam-container:nth-of-type(3) input').length > 0) {
                 scalesSectionAdded = true;
                 scalesText += `MMSE: No evaluado o sin alteraciones. `;
            }


            // Escala MDS-UPDRS III (Parkinson)
            const updrsScore = document.getElementById('updrs-score')?.textContent;
            const updrsSeverity = document.getElementById('updrs-severity')?.textContent;
            const updrsComponentsFilled = document.querySelectorAll('[id^="updrs-"]').length > 0 && Array.from(document.querySelectorAll('[id^="updrs-"]')).some(select => select.value !== '');

            if (updrsScore !== '0' || updrsComponentsFilled) {
                scalesSectionAdded = true;
                scalesText += `MDS-UPDRS III (Examen Motor): ${updrsScore}/24 puntos (${updrsSeverity}). `;
                const updrsComponents = ['expresion', 'temblor', 'rigidez', 'bradicinesia', 'inestabilidad', 'marcha'];
                const updrsDetails = [];
                updrsComponents.forEach(comp => {
                    const value = getSelectedText(`updrs-${comp}`);
                    if (value && value !== 'normal' && value !== 'ausente') updrsDetails.push(`${capitalizeFirstLetter(comp)}: ${value}`);
                });
                if (updrsDetails.length > 0) scalesText += `Hallazgos: ${updrsDetails.join('; ')}. `;
                else if (document.querySelectorAll('#neurological-scales .exam-container:nth-of-type(4) select').length > 0) scalesText += `Hallazgos: No espec√≠ficos. `;
            } else if (document.querySelectorAll('#neurological-scales .exam-container:nth-of-type(4) input').length > 0) {
                 scalesSectionAdded = true;
                 scalesText += `MDS-UPDRS III: No evaluado o sin hallazgos significativos. `;
            }


            if (scalesSectionAdded) {
                conclusion += `ESCALAS NEUROL√ìGICAS:\n${scalesText.trim()}\n\n`;
            }

            // --- 6. PRUEBAS ESPECIALES NEUROL√ìGICAS ---
            let specialTestsSectionAdded = false;
            let specialTestsText = '';

            // Signos Men√≠ngeos
            const meningealSigns = [];
            const meningealTests = ['rigidez-nuca', 'kernig', 'brudzinski'];
            meningealTests.forEach(test => {
                const posChecked = isChecked(`${test}-pos`);
                const negChecked = isChecked(`${test}-neg`);
                if (posChecked) {
                    specialTestsSectionAdded = true;
                    meningealSigns.push(`${capitalizeFirstLetter(getLabelText(test))}: Positivo`);
                } else if (negChecked) {
                    specialTestsSectionAdded = true;
                    meningealSigns.push(`${capitalizeFirstLetter(getLabelText(test))}: Negativo`);
                } else if (document.getElementById(`${test}-pos`)) { // Si los checkboxes existen pero no se marc√≥
                    specialTestsSectionAdded = true;
                    meningealSigns.push(`${capitalizeFirstLetter(getLabelText(test))}: No evaluado`);
                }
            });
            if (meningealSigns.length > 0) {
                specialTestsText += `Signos men√≠ngeos: ${meningealSigns.join('; ')}. `;
            } else if (document.querySelectorAll('#special-neuro-tests .exam-container:nth-of-type(1) input').length > 0) {
                 specialTestsSectionAdded = true;
                 specialTestsText += `Signos men√≠ngeos: No evaluados o ausentes. `;
            }


            // Pruebas de Coordinaci√≥n Avanzadas
            const advancedCoordination = [];
            const coordinationTestsAdv = ['stewart-holmes', 'barany', 'dismetria'];
            coordinationTestsAdv.forEach(test => {
                sides.forEach(side => {
                    const posId = `${test}-${side}-pos`;
                    const negId = `${test}-${side}-neg`;
                    if (isChecked(posId)) {
                        specialTestsSectionAdded = true;
                        advancedCoordination.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: Positivo`);
                    } else if (isChecked(negId)) {
                        specialTestsSectionAdded = true;
                        advancedCoordination.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: Negativo`);
                    } else if (document.getElementById(posId)) { // Si los checkboxes existen pero no se marc√≥
                        specialTestsSectionAdded = true;
                        advancedCoordination.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: No evaluada`);
                    }
                });
            });
            if (advancedCoordination.length > 0) {
                specialTestsText += `Pruebas de coordinaci√≥n avanzadas: ${advancedCoordination.join('; ')}. `;
            } else if (document.querySelectorAll('#special-neuro-tests .exam-container:nth-of-type(2) input').length > 0) {
                 specialTestsSectionAdded = true;
                 specialTestsText += `Pruebas de coordinaci√≥n avanzadas: No evaluadas o normales. `;
            }


            // Pruebas de Nervio Perif√©rico
            const peripheralNerveTests = [];
            const peripheralTests = ['tinel', 'phalen', 'lasegue'];
            peripheralTests.forEach(test => {
                sides.forEach(side => {
                    const posId = `${test}-${side}-pos`;
                    const negId = `${test}-${side}-neg`;
                    if (isChecked(posId)) {
                        specialTestsSectionAdded = true;
                        peripheralNerveTests.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: Positivo`);
                    } else if (isChecked(negId)) {
                        specialTestsSectionAdded = true;
                        peripheralNerveTests.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: Negativo`);
                    } else if (document.getElementById(posId)) { // Si los checkboxes existen pero no se marc√≥
                        specialTestsSectionAdded = true;
                        peripheralNerveTests.push(`${capitalizeFirstLetter(getLabelText(test))} ${side}: No evaluada`);
                    }
                });
            });
            if (peripheralNerveTests.length > 0) {
                specialTestsText += `Pruebas de nervio perif√©rico: ${peripheralNerveTests.join('; ')}. `;
            } else if (document.querySelectorAll('#special-neuro-tests .exam-container:nth-of-type(3) input').length > 0) {
                 specialTestsSectionAdded = true;
                 specialTestsText += `Pruebas de nervio perif√©rico: No evaluadas o normales. `;
            }


            if (specialTestsSectionAdded) {
                conclusion += `PRUEBAS ESPECIALES NEUROL√ìGICAS:\n${specialTestsText.trim()}\n\n`;
            }


            // --- CONCLUSI√ìN FINAL Y PLAN ---
            if (conclusion.trim() === 'INFORME DEL EXAMEN NEUROL√ìGICO:') {
                conclusion = 'Seleccione los par√°metros del examen para generar la conclusi√≥n neurol√≥gica...';
            } else {
                conclusion += 'RESUMEN Y CONCLUSI√ìN:\n';
                if (alertCount > 0) {
                    conclusion += `Se identifican **${alertCount} alertas cr√≠ticas** que requieren atenci√≥n inmediata. `;
                }
                if (warningCount > 0) {
                    conclusion += `Existen **${warningCount} hallazgos importantes** que deben ser considerados. `;
                }
                if (findingsCount > 0) {
                    conclusion += `Un total de ${findingsCount} hallazgos relevantes han sido registrados en este examen. `;
                } else {
                    conclusion += `El examen no ha revelado hallazgos significativos. `;
                }
                conclusion += '\n\n';

                conclusion += 'üéØ IMPRESI√ìN DIAGN√ìSTICA:\n';
                conclusion += '[Pendiente de correlaci√≥n con estudios de neuroimagen (ej., RMN cerebral, TC cerebral), estudios neurofisiol√≥gicos (ej., EMG, VCN, EEG), y an√°lisis de l√≠quido cefalorraqu√≠deo seg√∫n los hallazgos cl√≠nicos y antecedentes. Considerar diagn√≥sticos diferenciales seg√∫n el perfil de s√≠ntomas.]\n\n';
                conclusion += 'üìã PLAN DE MANEJO:\n';
                conclusion += '[El plan de manejo se establecer√° en funci√≥n de la impresi√≥n diagn√≥stica confirmada y la severidad de la condici√≥n neurol√≥gica. Podr√≠a incluir terapia farmacol√≥gica, rehabilitaci√≥n, interconsultas con especialistas o procedimientos espec√≠ficos. Se ajustar√° a la respuesta del paciente.]\n\n';
                conclusion += 'üìù SEGUIMIENTO:\n';
                conclusion += '[Se recomienda un seguimiento neurol√≥gico peri√≥dico para monitorear la evoluci√≥n de la enfermedad, la respuesta al tratamiento y la aparici√≥n de posibles complicaciones o recurrencias.]\n\n';
                conclusion += `üìä COMPLETITUD DEL EXAMEN: ${examProgress}%`;
            }

            conclusionEl.textContent = conclusion;
            
            // Actualizar panel sticky si est√° activo
            const stickyPanel = document.getElementById('stickyConclusion');
            if (stickyPanel && stickyPanel.classList.contains('active')) {
                // Peque√±o retardo para asegurar que el DOM se actualice antes de copiar
                setTimeout(() => generateStickyConclusion(), 100); 
            }
        }

        // üñ®Ô∏è Imprimir conclusi√≥n
        function printConclusion() {
            const conclusion = document.getElementById('conclusion-text').textContent;
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Conclusi√≥n Examen Neurol√≥gico</title>
                    <style>
                        body { 
                            font-family: Arial, sans-serif; 
                            margin: 20px; 
                            line-height: 1.6;
                        }
                        pre { 
                            white-space: pre-wrap; 
                            font-family: 'Courier New', monospace; 
                            font-size: 12px;
                        }
                        .header {
                            text-align: center;
                            border-bottom: 2px solid var(--primary-color);
                            padding-bottom: 10px;
                            margin-bottom: 20px;
                        }
                        .footer {
                            text-align: center;
                            font-size: 10px;
                            color: #666;
                            margin-top: 20px;
                            border-top: 1px solid #ddd;
                            padding-top: 10px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Examen Neurol√≥gico - Conclusi√≥n</h1>
                        <p>Fecha: ${new Date().toLocaleDateString()}</p>
                    </div>
                    <pre>${conclusion}</pre>
                    <div class="footer">
                        <p>Generado por Sistema de Evaluaci√≥n Neurol√≥gica</p>
                    </div>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // üóëÔ∏è Limpiar formulario
        function clearForm() {
            if (confirm('¬øEst√° seguro de que desea limpiar todos los datos del formulario?')) {
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    cb.checked = false;
                    cb.disabled = false; // Re-habilitar
                    // Aqu√≠ podr√≠as limpiar cualquier resaltado espec√≠fico si lo a√±adiste
                    cb.style.backgroundColor = '';
                    cb.style.border = '';
                });
                document.querySelectorAll('input[type="radio"]').forEach(rb => rb.checked = false);
                document.querySelectorAll('input[type="number"]').forEach(nb => nb.value = '');
                document.querySelectorAll('input[type="range"]').forEach(rg => rg.value = 0);
                document.querySelectorAll('select').forEach(sel => sel.selectedIndex = 0);
                document.querySelectorAll('textarea').forEach(ta => ta.value = '');
                
                // Resetear valores espec√≠ficos
                document.getElementById('cefalea-value').textContent = '0';
                document.getElementById('average-strength').textContent = '--';
                document.getElementById('glasgow-score').textContent = '0';
                document.getElementById('glasgow-severity').textContent = '--';
                document.getElementById('nihss-score').textContent = '0';
                document.getElementById('nihss-severity').textContent = '--';
                document.getElementById('mmse-score').textContent = '0';
                document.getElementById('mmse-interpretation').textContent = '--';
                document.getElementById('updrs-score').textContent = '0';
                document.getElementById('updrs-severity').textContent = '--';

                // Ocultar secciones condicionales de anamnesis
                document.getElementById('headache-section').classList.add('hidden');
                document.getElementById('seizure-section').classList.add('hidden');
                document.getElementById('consciousness-section').classList.add('hidden');
                
                // Resetear los estados del dashboard (variables globales)
                gcsStatus = '--';
                nihssStatus = '--';
                mmseStatus = '--';

                // Re-inicializar c√°lculo de escalas para que el dashboard muestre '--'
                calculateMotorScore(); // Esto actualizar√° el average-strength
                calculateGlasgow();
                calculateNIHSS();
                calculateMMSE();
                calculateUPDRS();

                updateDashboard(); // Una √∫ltima actualizaci√≥n al limpiar
                generateConclusion(); // Regenerar la conclusi√≥n
            }
        }
        
        // üöÄ Inicializaci√≥n del sistema
        document.addEventListener('DOMContentLoaded', () => {
            // Cargar tema guardado
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.setAttribute('data-theme', 'dark');
                document.getElementById('theme-icon').className = 'fas fa-sun';
            }

            // Event listeners para actualizar dashboard y conclusi√≥n
            document.querySelectorAll('input, select, textarea').forEach(el => {
                // Asegurarse de que no haya listeners duplicados antes de a√±adir
                el.removeEventListener('change', updateDashboard);
                el.removeEventListener('input', updateDashboard);
                el.removeEventListener('change', generateConclusion);
                el.removeEventListener('input', generateConclusion);

                // A√±adir los listeners
                el.addEventListener('change', () => {
                    updateDashboard();
                    generateConclusion();
                });
                el.addEventListener('input', () => { 
                    // Solo para inputs que requieren actualizaci√≥n continua (range, number, text)
                    if (el.type === 'range' || el.type === 'number' || el.type === 'text') {
                        updateDashboard();
                        generateConclusion();
                    }
                });
            });
             
            // Actualizar altura de secciones al cambiar contenido
            document.querySelector('.main-container').addEventListener('change', (event) => {
                const sectionContent = event.target.closest('.section-content.expanded');
                if (sectionContent) {
                    updateSectionHeight(sectionContent);
                }
            });
            document.querySelector('.main-container').addEventListener('input', (event) => { // Tambi√©n para inputs continuos
                const sectionContent = event.target.closest('.section-content.expanded');
                if (sectionContent) {
                    updateSectionHeight(sectionContent);
                }
            });
             
            // Expandir la primera secci√≥n por defecto
            const firstSectionHeader = document.querySelector('.section-header');
            if (firstSectionHeader && !firstSectionHeader.classList.contains('expanded')) {
                toggleSection(firstSectionHeader);
            }
            
            // Inicializar evaluaciones de escalas y estados del dashboard
            calculateMotorScore();
            calculateGlasgow();
            calculateNIHSS();
            calculateMMSE();
            calculateUPDRS();
            
            // Asegurarse de que las secciones de anamnesis condicionales se manejen correctamente al cargar
            handleHeadacheComplaint(document.getElementById('cefalea'));
            handleSeizureComplaint(document.getElementById('convulsiones'));
            handleConsciousnessComplaint(document.getElementById('perdida-conciencia'));
            handleNoComplaints(); // Para manejar el caso "sin quejas" al cargar

            updateDashboard(); // Una √∫ltima actualizaci√≥n del dashboard al cargar
            generateConclusion(); // Generar la conclusi√≥n inicial
            
            // Mostrar mensaje de bienvenida
            setTimeout(() => {
                console.log('üéâ Sistema de Evaluaci√≥n Neurol√≥gica Premium con Panel Sticky cargado exitosamente!');
            }, 1000);
        });
    </script>
</body>
</html>