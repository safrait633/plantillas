<!DOCTYPE html>
<html lang="es" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardiolog√≠a Avanzada - MedScap</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.css">
    <style>
        /* Estilos espec√≠ficos de cardiolog√≠a */
        :root {
            --cardio-primary: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            --cardio-secondary: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            --heart-rate-color: #e74c3c;
            --blood-pressure-color: #9b59b6;
            --oxygen-color: #3498db;
        }

        body {
            background: linear-gradient(135deg, #1e1b4b 0%, #1e293b 50%, #1e3a8a 100%);
            min-height: 100vh;
            color: white;
            padding-top: 120px;
        }

        .dashboard-fixed {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--cardio-primary);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            padding: 15px 0;
        }

        .dashboard-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .dashboard-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            color: white;
            text-align: center;
            font-size: 14px;
        }

        .dashboard-item:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        .dashboard-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .dashboard-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dashboard-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
        }

        .section {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(16px);
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid rgba(255,255,255,0.2);
            overflow: hidden;
        }

        .section-header {
            background: var(--cardio-primary);
            color: white;
            padding: 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .section-header:hover {
            background: var(--cardio-secondary);
            transform: translateY(-2px);
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            font-size: 16px;
        }

        .section-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background: rgba(255,255,255,0.05);
        }

        .section-content.expanded {
            padding: 25px;
            max-height: 2000px;
        }

        .form-group {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkbox-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-right: 12px;
            accent-color: var(--heart-rate-color);
        }

        .checkbox-item label {
            color: white;
            cursor: pointer;
            font-size: 14px;
        }

        .measurement-control {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 15px;
        }

        .measurement-input {
            width: 80px;
            height: 40px;
            font-size: 16px;
            font-weight: 600;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 6px;
            background: rgba(255,255,255,0.1);
            color: white;
            transition: all 0.3s ease;
        }

        .measurement-input:focus {
            border-color: var(--heart-rate-color);
            box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.1);
            outline: none;
        }

        .sticky-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(16px);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            height: fit-content;
            position: sticky;
            top: 140px;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .back-button:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .dashboard-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Bot√≥n de volver -->
    <a href="index.html" class="back-button">
        <i class="fas fa-arrow-left mr-2"></i>
        Volver al Portal
    </a>

    <!-- Dashboard Fijo Superior -->
    <div class="dashboard-fixed">
        <div class="dashboard-content">
            <div class="dashboard-grid">
                <div class="dashboard-item" id="dashboard-bp">
                    <i class="fas fa-heartbeat"></i>
                    <div>PA: <span id="bp-display">--/--</span></div>
                </div>
                <div class="dashboard-item" id="dashboard-hr">
                    <i class="fas fa-heart"></i>
                    <div>FC: <span id="hr-display">--</span> lpm</div>
                </div>
                <div class="dashboard-item" id="dashboard-sat">
                    <i class="fas fa-lungs"></i>
                    <div>SatO2: <span id="sat-display">--%</span></div>
                </div>
                <div class="dashboard-item" id="dashboard-chads">
                    <i class="fas fa-calculator"></i>
                    <div>CHADS2: <span id="chads-score">0</span></div>
                </div>
                <div class="dashboard-item" id="dashboard-hasbled">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>HAS-BLED: <span id="hasbled-score">0</span></div>
                </div>
                <div class="dashboard-item" id="dashboard-risk">
                    <i class="fas fa-shield-alt"></i>
                    <div>Riesgo: <span id="risk-level">Bajo</span></div>
                </div>
            </div>
            <div class="dashboard-controls">
                <button onclick="toggleTheme()" class="dashboard-btn">
                    <i id="theme-icon" class="fas fa-moon"></i>
                </button>
                <button onclick="printReport()" class="dashboard-btn">
                    <i class="fas fa-print"></i>
                </button>
                <button onclick="exportPDF()" class="dashboard-btn">
                    <i class="fas fa-file-pdf"></i>
                </button>
                <button onclick="togglePanel()" class="dashboard-btn">
                    <i class="fas fa-clipboard"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Contenedor Principal -->
    <div class="main-container">
        <!-- Contenido Principal -->
        <div class="main-content">
            <!-- Secci√≥n 1: Anamnesis y Quejas Principales -->
            <div class="section" id="section-anamnesis">
                <div class="section-header" onclick="toggleSection('anamnesis-content')">
                    <div class="section-title">
                        <i class="fas fa-comments"></i>
                        <span>ANAMNESIS Y QUEJAS PRINCIPALES</span>
                    </div>
                    <div class="section-indicators">
                        <span class="section-counter" id="anamnesis-counter">0/12</span>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                </div>
                <div class="section-content" id="anamnesis-content">
                    <div class="form-group">
                        <h4>üíì S√≠ntomas Cardiovasculares Principales</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" id="sin-quejas" onchange="handleNoComplaints()">
                                <label for="sin-quejas">Sin quejas cardiovasculares</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="dolor-toracico" onchange="handleChestPainToggle()">
                                <label for="dolor-toracico">Dolor tor√°cico</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="disnea" onchange="handleDyspneaToggle()">
                                <label for="disnea">Disnea</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="palpitaciones">
                                <label for="palpitaciones">Palpitaciones</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="sincope">
                                <label for="sincope">S√≠ncope</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="presincope">
                                <label for="presincope">Pres√≠ncope</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="edema">
                                <label for="edema">Edema</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="fatiga">
                                <label for="fatiga">Fatiga</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="ortopnea">
                                <label for="ortopnea">Ortopnea</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="disnea-paroxistica">
                                <label for="disnea-paroxistica">Disnea parox√≠stica nocturna</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="claudicacion">
                                <label for="claudicacion">Claudicaci√≥n intermitente</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="cianosis">
                                <label for="cianosis">Cianosis</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 2: Signos Vitales -->
            <div class="section" id="section-vitals">
                <div class="section-header" onclick="toggleSection('vitals-content')">
                    <div class="section-title">
                        <i class="fas fa-stethoscope"></i>
                        <span>SIGNOS VITALES Y MEDICIONES</span>
                    </div>
                    <div class="section-indicators">
                        <span class="section-counter" id="vitals-counter">0/6</span>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                </div>
                <div class="section-content" id="vitals-content">
                    <div class="form-group">
                        <h4>ü©∫ Presi√≥n Arterial</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div class="measurement-control">
                                <label style="color: white;">PAS Derecho:</label>
                                <input type="number" id="pas-derecho" class="measurement-input" min="80" max="200" onchange="evaluateBloodPressure()">
                                <span style="color: white;">mmHg</span>
                            </div>
                            <div class="measurement-control">
                                <label style="color: white;">PAD Derecho:</label>
                                <input type="number" id="pad-derecho" class="measurement-input" min="40" max="120" onchange="evaluateBloodPressure()">
                                <span style="color: white;">mmHg</span>
                            </div>
                            <div class="measurement-control">
                                <label style="color: white;">PAS Izquierdo:</label>
                                <input type="number" id="pas-izquierdo" class="measurement-input" min="80" max="200" onchange="evaluateBloodPressure()">
                                <span style="color: white;">mmHg</span>
                            </div>
                            <div class="measurement-control">
                                <label style="color: white;">PAD Izquierdo:</label>
                                <input type="number" id="pad-izquierdo" class="measurement-input" min="40" max="120" onchange="evaluateBloodPressure()">
                                <span style="color: white;">mmHg</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <h4>üíì Frecuencia Card√≠aca y Oxigenaci√≥n</h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div class="measurement-control">
                                <label style="color: white;">Frecuencia Card√≠aca:</label>
                                <input type="number" id="frecuencia-cardiaca" class="measurement-input" min="40" max="180" onchange="evaluateHeartRate()">
                                <span style="color: white;">lpm</span>
                            </div>
                            <div class="measurement-control">
                                <label style="color: white;">Saturaci√≥n O2:</label>
                                <input type="number" id="saturacion-oxigeno" class="measurement-input" min="70" max="100" onchange="evaluateSaturation()">
                                <span style="color: white;">%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n 3: Escalas de Evaluaci√≥n -->
            <div class="section" id="section-scales">
                <div class="section-header" onclick="toggleSection('scales-content')">
                    <div class="section-title">
                        <i class="fas fa-calculator"></i>
                        <span>ESCALAS DE EVALUACI√ìN CARDIOVASCULAR</span>
                    </div>
                    <div class="section-indicators">
                        <span class="section-counter" id="scales-counter">0/3</span>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                </div>
                <div class="section-content" id="scales-content">
                    <!-- CHADS2-VASc Score -->
                    <div class="form-group">
                        <h4>üéØ CHADS2-VASc Score</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-chf" onchange="calculateCHADS()">
                                <label for="chads-chf">ICC (Insuficiencia Card√≠aca)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-hipertension" onchange="calculateCHADS()">
                                <label for="chads-hipertension">Hipertensi√≥n</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-edad75" onchange="calculateCHADS()">
                                <label for="chads-edad75">Edad ‚â•75 a√±os (2 puntos)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-diabetes" onchange="calculateCHADS()">
                                <label for="chads-diabetes">Diabetes</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-avc" onchange="calculateCHADS()">
                                <label for="chads-avc">ACV/AIT/TEP previo (2 puntos)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-vascular" onchange="calculateCHADS()">
                                <label for="chads-vascular">Enfermedad vascular</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-edad65" onchange="calculateCHADS()">
                                <label for="chads-edad65">Edad 65-74 a√±os</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="chads-sexo" onchange="calculateCHADS()">
                                <label for="chads-sexo">Sexo femenino</label>
                            </div>
                        </div>
                        <div id="chads-result" style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <strong style="color: white;">Resultado CHADS2-VASc: <span id="chads-total">0</span> puntos</strong>
                            <div id="chads-interpretation" style="color: #a0a0a0; margin-top: 5px;"></div>
                        </div>
                    </div>

                    <!-- HAS-BLED Score -->
                    <div class="form-group">
                        <h4>‚ö†Ô∏è HAS-BLED Score</h4>
                        <div class="checkbox-grid">
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-hipertension" onchange="calculateHASBLED()">
                                <label for="hasbled-hipertension">Hipertensi√≥n</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-renal" onchange="calculateHASBLED()">
                                <label for="hasbled-renal">Funci√≥n renal anormal</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-hepatica" onchange="calculateHASBLED()">
                                <label for="hasbled-hepatica">Funci√≥n hep√°tica anormal</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-avc" onchange="calculateHASBLED()">
                                <label for="hasbled-avc">ACV previo</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-sangrado" onchange="calculateHASBLED()">
                                <label for="hasbled-sangrado">Historia de sangrado</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-inr" onchange="calculateHASBLED()">
                                <label for="hasbled-inr">INR l√°bil</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-edad" onchange="calculateHASBLED()">
                                <label for="hasbled-edad">Edad >65 a√±os</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="hasbled-drogas" onchange="calculateHASBLED()">
                                <label for="hasbled-drogas">Drogas/alcohol</label>
                            </div>
                        </div>
                        <div id="hasbled-result" style="margin-top: 15px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                            <strong style="color: white;">Resultado HAS-BLED: <span id="hasbled-total">0</span> puntos</strong>
                            <div id="hasbled-interpretation" style="color: #a0a0a0; margin-top: 5px;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Panel Lateral -->
        <div class="sticky-panel" id="conclusion-panel">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="color: white; margin: 0;">üìã Conclusi√≥n Cl√≠nica</h3>
                <button onclick="copyConclusion()" style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
                    <i class="fas fa-copy"></i>
                </button>
            </div>
            <div id="conclusion-content" style="color: white; line-height: 1.6;">
                <p>Seleccione los s√≠ntomas y complete las mediciones para generar la conclusi√≥n autom√°tica.</p>
            </div>
            
            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                <h4 style="color: white; margin-bottom: 10px;">üìä Progreso del Examen</h4>
                <div style="background: rgba(255,255,255,0.1); height: 8px; border-radius: 4px; overflow: hidden;">
                    <div id="progress-bar" style="height: 100%; background: var(--cardio-primary); width: 0%; transition: width 0.3s ease;"></div>
                </div>
                <div style="text-align: center; margin-top: 10px; color: #a0a0a0; font-size: 14px;">
                    <span id="progress-text">0% completado</span>
                </div>
            </div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        // Variables globales para cardiolog√≠a
        let currentProgress = 0;
        let totalSections = 3;

        // === FUNCIONES DE EVALUACI√ìN CARDIOVASCULAR ===
        function evaluateBloodPressure() {
            const pasDer = parseInt(document.getElementById('pas-derecho').value) || 0;
            const padDer = parseInt(document.getElementById('pad-derecho').value) || 0;
            const pasIzq = parseInt(document.getElementById('pas-izquierdo').value) || 0;
            const padIzq = parseInt(document.getElementById('pad-izquierdo').value) || 0;

            // Usar el brazo con mayor presi√≥n
            const pasMax = Math.max(pasDer, pasIzq);
            const padMax = Math.max(padDer, padIzq);

            document.getElementById('bp-display').textContent = `${pasMax}/${padMax}`;

            // Clasificaci√≥n de presi√≥n arterial
            let classification = '';
            let color = '';

            if (pasMax >= 180 || padMax >= 110) {
                classification = 'Crisis Hipertensiva';
                color = '#e74c3c';
            } else if (pasMax >= 160 || padMax >= 100) {
                classification = 'Hipertensi√≥n Grado 2';
                color = '#e67e22';
            } else if (pasMax >= 140 || padMax >= 90) {
                classification = 'Hipertensi√≥n Grado 1';
                color = '#f39c12';
            } else if (pasMax >= 130 || padMax >= 85) {
                classification = 'Prehipertensi√≥n';
                color = '#f1c40f';
            } else {
                classification = 'Normal';
                color = '#27ae60';
            }

            document.getElementById('dashboard-bp').style.background = `rgba(${color === '#e74c3c' ? '231, 76, 60' : color === '#27ae60' ? '39, 174, 96' : '241, 196, 15'}, 0.2)`;
            
            updateDashboard();
            generateConclusion();
        }

        function evaluateHeartRate() {
            const hr = parseInt(document.getElementById('frecuencia-cardiaca').value) || 0;
            document.getElementById('hr-display').textContent = hr;

            let classification = '';
            let color = '';

            if (hr > 100) {
                classification = 'Taquicardia';
                color = '#e74c3c';
            } else if (hr < 60) {
                classification = 'Bradicardia';
                color = '#f39c12';
            } else {
                classification = 'Normal';
                color = '#27ae60';
            }

            document.getElementById('dashboard-hr').style.background = `rgba(${color === '#e74c3c' ? '231, 76, 60' : color === '#27ae60' ? '39, 174, 96' : '241, 196, 15'}, 0.2)`;
            
            updateDashboard();
            generateConclusion();
        }

        function evaluateSaturation() {
            const sat = parseInt(document.getElementById('saturacion-oxigeno').value) || 0;
            document.getElementById('sat-display').textContent = `${sat}%`;

            let color = '';
            if (sat < 90) {
                color = '#e74c3c';
            } else if (sat < 95) {
                color = '#f39c12';
            } else {
                color = '#27ae60';
            }

            document.getElementById('dashboard-sat').style.background = `rgba(${color === '#e74c3c' ? '231, 76, 60' : color === '#27ae60' ? '39, 174, 96' : '241, 196, 15'}, 0.2)`;
            
            updateDashboard();
            generateConclusion();
        }

        function calculateCHADS() {
            let score = 0;
            
            if (document.getElementById('chads-chf').checked) score += 1;
            if (document.getElementById('chads-hipertension').checked) score += 1;
            if (document.getElementById('chads-edad75').checked) score += 2;
            if (document.getElementById('chads-diabetes').checked) score += 1;
            if (document.getElementById('chads-avc').checked) score += 2;
            if (document.getElementById('chads-vascular').checked) score += 1;
            if (document.getElementById('chads-edad65').checked) score += 1;
            if (document.getElementById('chads-sexo').checked) score += 1;

            document.getElementById('chads-score').textContent = score;
            document.getElementById('chads-total').textContent = score;

            let interpretation = '';
            let color = '';

            if (score >= 3) {
                interpretation = 'Alto riesgo de ACV - Anticoagulaci√≥n recomendada';
                color = '#e74c3c';
            } else if (score === 2) {
                interpretation = 'Riesgo moderado - Considerar anticoagulaci√≥n';
                color = '#f39c12';
            } else if (score === 1) {
                interpretation = 'Riesgo bajo-moderado - Considerar anticoagulaci√≥n o aspirina';
                color = '#f1c40f';
            } else {
                interpretation = 'Riesgo muy bajo - No requiere anticoagulaci√≥n';
                color = '#27ae60';
            }

            document.getElementById('chads-interpretation').textContent = interpretation;
            document.getElementById('chads-interpretation').style.color = color;

            updateDashboard();
            generateConclusion();
        }

        function calculateHASBLED() {
            let score = 0;
            
            if (document.getElementById('hasbled-hipertension').checked) score += 1;
            if (document.getElementById('hasbled-renal').checked) score += 1;
            if (document.getElementById('hasbled-hepatica').checked) score += 1;
            if (document.getElementById('hasbled-avc').checked) score += 1;
            if (document.getElementById('hasbled-sangrado').checked) score += 1;
            if (document.getElementById('hasbled-inr').checked) score += 1;
            if (document.getElementById('hasbled-edad').checked) score += 1;
            if (document.getElementById('hasbled-drogas').checked) score += 1;

            document.getElementById('hasbled-score').textContent = score;
            document.getElementById('hasbled-total').textContent = score;

            let interpretation = '';
            let color = '';

            if (score >= 3) {
                interpretation = 'Alto riesgo de sangrado - Precauci√≥n con anticoagulaci√≥n';
                color = '#e74c3c';
            } else if (score === 2) {
                interpretation = 'Riesgo moderado de sangrado';
                color = '#f39c12';
            } else {
                interpretation = 'Riesgo bajo de sangrado';
                color = '#27ae60';
            }

            document.getElementById('hasbled-interpretation').textContent = interpretation;
            document.getElementById('hasbled-interpretation').style.color = color;

            updateDashboard();
            generateConclusion();
        }

        // === FUNCIONES DE INTERFAZ ===
        function toggleSection(sectionId) {
            const content = document.getElementById(sectionId);
            const header = content.previousElementSibling;
            const arrow = header.querySelector('.section-arrow');
            
            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                arrow.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('expanded');
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        function handleNoComplaints() {
            const noComplaints = document.getElementById('sin-quejas').checked;
            const otherCheckboxes = document.querySelectorAll('#section-anamnesis input[type="checkbox"]:not(#sin-quejas)');
            
            if (noComplaints) {
                otherCheckboxes.forEach(cb => {
                    cb.checked = false;
                    cb.disabled = true;
                });
            } else {
                otherCheckboxes.forEach(cb => {
                    cb.disabled = false;
                });
            }
            
            updateDashboard();
            generateConclusion();
        }

        function handleChestPainToggle() {
            updateDashboard();
            generateConclusion();
        }

        function handleDyspneaToggle() {
            updateDashboard();
            generateConclusion();
        }

        function updateDashboard() {
            // Actualizar contadores de secciones
            const anamnesisChecked = document.querySelectorAll('#section-anamnesis input:checked').length;
            const vitalsCompleted = document.querySelectorAll('#section-vitals input[value]:not([value=""])').length;
            const scalesCompleted = (document.getElementById('chads-total').textContent !== '0' ? 1 : 0) + 
                                  (document.getElementById('hasbled-total').textContent !== '0' ? 1 : 0);

            document.getElementById('anamnesis-counter').textContent = `${anamnesisChecked}/12`;
            document.getElementById('vitals-counter').textContent = `${vitalsCompleted}/6`;
            document.getElementById('scales-counter').textContent = `${scalesCompleted}/2`;

            // Calcular progreso total
            const totalProgress = ((anamnesisChecked / 12) + (vitalsCompleted / 6) + (scalesCompleted / 2)) / 3 * 100;
            document.getElementById('progress-bar').style.width = `${totalProgress}%`;
            document.getElementById('progress-text').textContent = `${Math.round(totalProgress)}% completado`;
        }

        function generateConclusion() {
            const symptoms = [];
            const measurements = [];
            const scales = [];

            // Recopilar s√≠ntomas
            document.querySelectorAll('#section-anamnesis input:checked').forEach(input => {
                if (input.id !== 'sin-quejas') {
                    symptoms.push(input.nextElementSibling.textContent);
                }
            });

            // Recopilar mediciones
            const pas = document.getElementById('pas-derecho').value;
            const pad = document.getElementById('pad-derecho').value;
            const hr = document.getElementById('frecuencia-cardiaca').value;
            const sat = document.getElementById('saturacion-oxigeno').value;

            if (pas && pad) measurements.push(`PA: ${pas}/${pad} mmHg`);
            if (hr) measurements.push(`FC: ${hr} lpm`);
            if (sat) measurements.push(`SatO2: ${sat}%`);

            // Recopilar escalas
            const chadsScore = document.getElementById('chads-total').textContent;
            const hasbledScore = document.getElementById('hasbled-total').textContent;
            
            if (chadsScore !== '0') scales.push(`CHADS2-VASc: ${chadsScore}`);
            if (hasbledScore !== '0') scales.push(`HAS-BLED: ${hasbledScore}`);

            // Generar conclusi√≥n
            let conclusion = '<h4 style="color: #e74c3c; margin-bottom: 15px;">ü´Ä EVALUACI√ìN CARDIOVASCULAR</h4>';
            
            if (symptoms.length > 0) {
                conclusion += '<p><strong>S√≠ntomas:</strong> ' + symptoms.join(', ') + '</p>';
            }
            
            if (measurements.length > 0) {
                conclusion += '<p><strong>Signos Vitales:</strong> ' + measurements.join(', ') + '</p>';
            }
            
            if (scales.length > 0) {
                conclusion += '<p><strong>Escalas:</strong> ' + scales.join(', ') + '</p>';
            }

            // Agregar interpretaciones
            const chadsInterpretation = document.getElementById('chads-interpretation').textContent;
            const hasbledInterpretation = document.getElementById('hasbled-interpretation').textContent;
            
            if (chadsInterpretation) {
                conclusion += `<p><strong>Riesgo de ACV:</strong> ${chadsInterpretation}</p>`;
            }
            
            if (hasbledInterpretation) {
                conclusion += `<p><strong>Riesgo de Sangrado:</strong> ${hasbledInterpretation}</p>`;
            }

            document.getElementById('conclusion-content').innerHTML = conclusion;
        }

        function togglePanel() {
            const panel = document.getElementById('conclusion-panel');
            panel.style.position = panel.style.position === 'fixed' ? 'sticky' : 'fixed';
        }

        function copyConclusion() {
            const content = document.getElementById('conclusion-content').textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert('Conclusi√≥n copiada al portapapeles');
            });
        }

        function printReport() {
            window.print();
        }

        function exportPDF() {
            alert('Funci√≥n de exportaci√≥n PDF en desarrollo');
        }

        function toggleTheme() {
            if (window.themeManager) {
                window.themeManager.toggleTheme();
            }
        }

        // === INICIALIZACI√ìN ===
        document.addEventListener('DOMContentLoaded', function() {
            // Expandir primera secci√≥n por defecto
            toggleSection('anamnesis-content');
            
            // Inicializar dashboard
            updateDashboard();
            
            console.log('ü´Ä M√≥dulo de Cardiolog√≠a cargado exitosamente');
        });
    </script>
</body>
</html>